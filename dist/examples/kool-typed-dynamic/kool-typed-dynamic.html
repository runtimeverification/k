<!DOCTYPE html>
<html lang="en">
<head>
	<title>KOOL-TYPED-DYNAMIC</title>
	<style>
.bold
{
font-weight: bold;
}
.italic
{
font-style: italic;
}
em
{
font-style: italic;
}
.large
{
font-size: large;
}
.xlarge
{
font-size: x-large;
}
.attribute
{
color: blue;
}
.center
{
text-align: center;
}
.textCentered
{
text-align: center;
display: inline-block;
vertical-align: top;
min-width: 20px;
}
.cell
{
display: inline-block;
vertical-align: top;
text-align:left;
}
hr.reduce
{
color: black;
background-color: black;
height: 3px;
}
hr.reduce:after
{
width: 0;
height: 0;
border-left : 6px solid transparent;
border-right : 6px solid transparent;
border-top : 6px solid black;
position: absolute;
content: "";
}
.tab
{
display: inline-block;
padding : 2px;
margin-left : 0;
border-top : 3px solid;
border-left : 3px solid;
border-right : 3px solid;
text-align: left;
}
.tab.curvedEdge
{
position: relative;
left: 30px;
top : 3px;
}
.tab.straightEdge
{
position: relative;
left: 8px;
top : 3px;
}
.block
{
color : black;
border-width: 3px;
display: inline-block; 
padding: 10px;
padding-left: 20px;
padding-right: 20px;
border-radius: 30px;
border-style: solid;
min-width: 60px;
text-align: left;
}
.block.right
{
border-top-right-radius: 0px;
border-bottom-right-radius: 0px;
border-right-style: dotted;
}
.block.left
{
border-top-left-radius: 0px;
border-bottom-left-radius: 0px;
border-left-style: dotted;
}
.red
{
border-color: #892d29;
background-color: #f5c4c4;
}
.orange
{
border-color: #804000;
background-color: #f6dec5;
}
.yellow
{
border-color: #96915c;
background-color: #f7f7c5;
}
.green
{
border-color: #008000;
background-color: #BEEEBE;
}
.defaultColor
{
border-color: #000000;
background-color: #FFFFFF;
}
.white
{
border-color: #808080;
background-color: #f0f0f0;
}
.magenta
{
border-color: #ad7a9b;
background-color: #edbeed;
}
.gray
{
border-color: #7c7c7c;
background-color: #d7d7d7;
}
	</style>
	<meta charset="utf-8" />
</head>
<body>
<span class="xlarge">KOOL-TYPED-DYNAMIC </span> 
<div> <br /> </div>
<div>MODULE <span class="large">KOOL-TYPED-DYNAMIC-SYNTAX</span> <br /> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Id </span></td><td> ::= </td> <td>main </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Type </span></td><td> ::= </td> <td>int </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>bool </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>string </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>void </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>arrayOf <span class ="italic"> Type </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>function from <span class ="italic"> Types </span>to <span class ="italic"> Type </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Types </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">Type</span>,","} </span>
 [ <span class ="attribute"> strict</span> ]</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Decl </span></td><td> ::= </td> <td>var <span class ="italic"> Exps </span>; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Exp </span></td><td> ::= </td> <td><span class ="italic"> Int </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Bool </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> String </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Id </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>this </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>super </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>( <span class ="italic"> Exp </span>) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>++ <span class ="italic"> Exp </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>instanceOf <span class ="italic"> Id </span> [ <span class ="attribute"> strict(1)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>cast <span class ="italic"> Exp </span>to <span class ="italic"> Id </span> [ <span class ="attribute"> strict(1)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>new <span class ="italic"> Id </span>( <span class ="italic"> Exps </span>)  [ <span class ="attribute"> strict(2)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>. <span class ="italic"> Id </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>[ <span class ="italic"> Exps </span>]  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>( <span class ="italic"> Exps </span>)  [ <span class ="attribute"> strict(2)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>- <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>sizeOf ( <span class ="italic"> Exp </span>)  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>read ( ) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>* <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>/ <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>% <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>+ <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>- <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>&lt; <span class ="italic"> Exp </span> [ <span class ="attribute"> strict, non-assoc</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>&lt;= <span class ="italic"> Exp </span> [ <span class ="attribute"> strict, non-assoc</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>> <span class ="italic"> Exp </span> [ <span class ="attribute"> strict, non-assoc</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>>= <span class ="italic"> Exp </span> [ <span class ="attribute"> strict, non-assoc</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>== <span class ="italic"> Exp </span> [ <span class ="attribute"> strict, non-assoc</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>!= <span class ="italic"> Exp </span> [ <span class ="attribute"> strict, non-assoc</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>not <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>and <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>or <span class ="italic"> Exp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>= <span class ="italic"> Exp </span> [ <span class ="attribute"> strict(2)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>: <span class ="italic"> Type </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Exps </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">Exp</span>,","} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Stmt </span></td><td> ::= </td> <td>{ } </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>{ <span class ="italic"> Stmts </span>} </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Exp </span>;  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>if <span class ="italic"> Exp </span>then <span class ="italic"> Stmt </span>else <span class ="italic"> Stmt </span> [ <span class ="attribute"> avoid, strict(1)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>if <span class ="italic"> Exp </span>then <span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>while <span class ="italic"> Exp </span>do <span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>for <span class ="italic"> Id </span>= <span class ="italic"> Exp </span>to <span class ="italic"> Exp </span>do <span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>return <span class ="italic"> Exp </span>;  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>return ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>print ( <span class ="italic"> Exps </span>) ;  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>throw <span class ="italic"> Exp </span>;  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>spawn <span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>acquire <span class ="italic"> Exp </span>;  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>release <span class ="italic"> Exp </span>;  [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>rendezvous <span class ="italic"> Exp </span>;  [ <span class ="attribute"> strict</span> ]</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Stmts </span></td><td> ::= </td> <td><span class ="italic"> Decl </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Stmts </span><span class ="italic"> Stmts </span></td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> if <span title ="Exp">E </span> then <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em> if <span title ="Exp">E </span> then <span title ="Stmt">S </span> else { } </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> for <span title ="Id">X </span> = <span title ="Exp">E1 </span> to <span title ="Exp">E2 </span> do <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em> { var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span>int )= <span title ="Exp">E1 </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; while <span title ="Id">X </span> &lt;= <span title ="Exp">E2 </span> do { <span title ="Stmt">S </span> <span title ="Id">X </span> = <span title ="Id">X </span> + <span title ="#Int"> 1 </span> ; } } </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> var <span title ="Exp">E1 </span>  , <span title ="Exp">E2 </span>  , <span title ="Exps">Es </span>   ; </em> <hr class="reduce"/> <em> var <span title ="Exp">E1 </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; var <span title ="Exp">E2 </span>  , <span title ="Exps">Es </span>  ; </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> )= <span title ="Exp">E </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; </em> <hr class="reduce"/> <em> var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ) ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; <span title ="Id">X </span> = <span title ="Exp">E </span> ; </em> </div></div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Id </span></td><td> ::= </td> <td>object </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Type </span></td><td> ::= </td> <td>class <span class ="italic"> Id </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Decl </span></td><td> ::= </td> <td>method <span class ="italic"> Id </span>( <span class ="italic"> Exps </span>) : <span class ="italic"> Type </span><span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>method <span class ="italic"> Id </span>( <span class ="italic"> Exps </span>) <span class ="italic"> Stmt </span></td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> method <span title ="Id">X </span> ( <span title ="Exps">Es </span> ) <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em> method <span title ="Id">X </span> ( <span title ="Exps">Es </span> ) : void <span title ="Stmt">S </span> </em> </div></div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Decl </span></td><td> ::= </td> <td>class <span class ="italic"> Id </span>{ <span class ="italic"> Stmts </span>} </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>class <span class ="italic"> Id </span>extends <span class ="italic"> Id </span>{ <span class ="italic"> Stmts </span>} </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> class <span title ="Id">C </span> { <span title ="Stmts">Ss </span> } </em> <hr class="reduce"/> <em> class <span title ="Id">C </span> extends object { <span title ="Stmts">Ss </span> } </em> </div></div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Stmt </span></td><td> ::= </td> <td>try <span class ="italic"> Stmt </span>catch ( <span class ="italic"> Exp </span>) <span class ="italic"> Stmt </span></td> </tr>
</table>
<br />
END MODULE </div>
<br />
<div>MODULE <span class="large">KOOL-TYPED-DYNAMIC</span> <br /> <br />
<div> CONFIGURATION : <br /><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">T</span> </div><br /><div class="block red" > <div class="center"><div class="cell"> <div class="tab curvedEdge orange"><span class = "bold">threads</span> </div><br /><div class="block orange" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge yellow"><span class = "bold">thread</span> </div><br /><div class="block yellow" style="min-width:4.2em"> <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><span title ="K">$PGM </span> &#x219d; execute </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"> <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">holds</span> </div><br /><div class="block defaultColor" > <div class="center"> <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">control</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">fstack</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"> <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">xstack</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"> <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">return</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center">void </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">object </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"> <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">location</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"> <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge white"><span class = "bold">store</span> </div><br /><div class="block white" > <div class="center"> <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">busy</span> </div><br /><div class="block defaultColor" > <div class="center"> <span title="Set" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge magenta"><span class = "bold">in</span> </div><br /><div class="block magenta" > <div class="center"> <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">out</span> </div><br /><div class="block defaultColor" > <div class="center"> <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge gray"><span class = "bold">nextLoc</span> </div><br /><div class="block gray" style="min-width:4.9em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">classes</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">class</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">className</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">main </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">extends</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center">object </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">declarations</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"> <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> <br /><table> <tr> <td> SYNTAX <span class ="italic"> Val </span></td><td> ::= </td> <td><span class ="italic"> Int </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Bool </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> String </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>arrayRef ( <span class ="italic"> Type </span>, <span class ="italic"> Int </span>, <span class ="italic"> Int </span>) </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Vals </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">Val</span>,","} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Exp </span></td><td> ::= </td> <td><span class ="italic"> Val </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> KResult </span></td><td> ::= </td> <td><span class ="italic"> Val </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>undefined ( <span class ="italic"> Type </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ) ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> [ <span title ="Nat">L </span> / <span title ="Id">X </span> ] </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><div class="textCentered"> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Nat">L </span> <span text-size="large"> &#x21a6; </span>undefined ( <span title ="Type">T </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge gray"><span class = "bold">nextLoc</span> </div><br /><div class="block gray" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Int">L </span> </em> <hr class="reduce"/> <em> <span title ="Nat">L </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> [ <span title ="Int">N </span>  ,  <span title="Vals" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ] <span class="bold">, </span>arrayOf <span title ="Type">T </span> ) ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> [ <span title ="Int">L </span> / <span title ="Id">X </span> ] </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><div class="textCentered"> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> <span text-size="large"> &#x21a6; </span>arrayRef ( arrayOf <span title ="Type">T </span> , <span title ="Int">L </span> +Int <span title ="#Int"> 1 </span> , <span title ="Int">N </span> ) <span title ="Int">L </span> +Int <span title ="#Int"> 1 </span> .. <span title ="Int">L </span> +Int <span title ="Int">N </span> <span text-size="large"> &#x21a6; </span>undefined ( <span title ="Type">T </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge gray"><span class = "bold">nextLoc</span> </div><br /><div class="block gray" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Int">L </span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> +Int <span title ="#Int"> 1 </span> +Int <span title ="Int">N </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> CONTEXT var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> [ &#9633;] <span class="bold">, </span><span title ="Type">T </span> ) ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Id </span></td><td> ::= </td> <td>$1 </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>$2 </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> [ <span title ="Int">N1 </span>  , <span title ="Int">N2 </span>  , <span title ="Vals">Vs </span>   ] <span class="bold">, </span>arrayOf arrayOf <span title ="Type">T </span> ) ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; </em> <hr class="reduce"/> <em> var <span title ="Id">X </span> [ <span title ="Int">N1 </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ] : arrayOf arrayOf <span title ="Type">T </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; { var $1 : arrayOf arrayOf <span title ="Type">T </span> = <span title ="Id">X </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; for $2 = <span title ="#Int"> 0 </span> to <span title ="Int">N1 </span> - <span title ="#Int"> 1 </span> do { var <span title ="Id">X </span> [ <span title ="Int">N2 </span>  , <span title ="Vals">Vs </span>  ] : arrayOf <span title ="Type">T </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; $1 [ $2  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ] = <span title ="Id">X </span> ; } } </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> <span title ="Id">X </span> </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block left right defaultColor" > <div class="center"><span title ="Id">X </span> <span text-size="large"> &#x21a6; </span><span title ="Int">L </span> </div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">L </span> <span text-size="large"> &#x21a6; </span><span title ="Val">V </span> </div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> CONTEXT ++ <div class="textCentered"> <em> &#9633;</em> <hr class="reduce"/> <em> lvalue ( &#9633;) </em> </div></div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> ++ loc ( <span title ="Int">L </span> ) </em> <hr class="reduce"/> <em> <span title ="Int">I </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">L </span> <span text-size="large"> &#x21a6; </span><div class="textCentered"> <em> <span title ="Int">I </span> </em> <hr class="reduce"/> <em> <span title ="Int">I </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> + <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> +Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="String">Str1 </span> + <span title ="String">Str2 </span> </em> <hr class="reduce"/> <em> <span title ="String">Str1 </span> +String <span title ="String">Str2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> - <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> -Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> * <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> *Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> / <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> /Int <span title ="Int">I2 </span> </em> </div></div>  when <span title ="Int">I2 </span> =/=Int <span title ="#Int"> 0 </span> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> % <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> %Int <span title ="Int">I2 </span> </em> </div></div>  when <span title ="Int">I2 </span> =/=Int <span title ="#Int"> 0 </span> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> - <span title ="Int">I </span> </em> <hr class="reduce"/> <em> <span title ="#Int"> 0 </span> -Int <span title ="Int">I </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> &lt; <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> &lt;Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> &lt;= <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> &lt;=Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> > <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> >Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">I1 </span> >= <span title ="Int">I2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">I1 </span> >=Int <span title ="Int">I2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Val">V1 </span> == <span title ="Val">V2 </span> </em> <hr class="reduce"/> <em> <span title ="Val">V1 </span> ==K <span title ="Val">V2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Val">V1 </span> != <span title ="Val">V2 </span> </em> <hr class="reduce"/> <em> <span title ="Val">V1 </span> =/=K <span title ="Val">V2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Bool">B1 </span> and <span title ="Bool">B2 </span> </em> <hr class="reduce"/> <em> <span title ="Bool">B1 </span> andBool <span title ="Bool">B2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Bool">B1 </span> or <span title ="Bool">B2 </span> </em> <hr class="reduce"/> <em> <span title ="Bool">B1 </span> orBool <span title ="Bool">B2 </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> not <span title ="Bool">B </span> </em> <hr class="reduce"/> <em> notBool <span title ="Bool">B </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Val">V </span> [ <span title ="Int">N1 </span>  , <span title ="Int">N2 </span>  , <span title ="Vals">Vs </span>   ] </em> <hr class="reduce"/> <em> <span title ="Val">V </span> [ <span title ="Int">N1 </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ] [ <span title ="Int">N2 </span>  , <span title ="Vals">Vs </span>  ] </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> arrayRef ( <span title ="K">_ </span> , <span title ="Int">L </span> , <span title ="Int">M </span> ) [ <span title ="Int">N </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ] </em> <hr class="reduce"/> <em> lookup ( <span title ="Int">L </span> +Int <span title ="Int">N </span> ) </em> </div></div>  when <span title ="Int">N </span> >=Int <span title ="#Int"> 0 </span> andBool <span title ="Int">N </span> &lt;Int <span title ="Int">M </span>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> sizeOf ( arrayRef ( <span title ="K">_ </span> , <span title ="Int">_ </span> , <span title ="Int">N </span> ) ) </em> <hr class="reduce"/> <em> <span title ="Int">N </span> </em> </div></div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Val </span></td><td> ::= </td> <td>nothing </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> return ; </em> <hr class="reduce"/> <em> return nothing ; </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> read ( ) </em> <hr class="reduce"/> <em> <span title ="Int">I </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge magenta"><span class = "bold">in</span> </div><br /><div class="block right magenta" > <div class="center"><div class="textCentered"> <em> <span title ="Int">I </span> </em> <hr class="reduce"/> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> CONTEXT <div class="textCentered"> <em> &#9633;</em> <hr class="reduce"/> <em> lvalue ( &#9633;) </em> </div>= <span title ="K">_ </span> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> { } </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> { <span title ="Stmts">Ss </span> } </em> <hr class="reduce"/> <em> <span title ="Stmts">Ss </span> &#x219d; env ( <span title ="Map">Env </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="K">Ss1 </span> <span title ="K">Ss2 </span> </em> <hr class="reduce"/> <em> <span title ="K">Ss1 </span> &#x219d; <span title ="K">Ss2 </span> </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> if <span title ="#Bool"> true </span> then <span title ="Stmt">S </span> else <span title ="K">_ </span> </em> <hr class="reduce"/> <em> <span title ="Stmt">S </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> if <span title ="#Bool"> false </span> then <span title ="K">_ </span> else <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em> <span title ="Stmt">S </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> while <span title ="Exp">E </span> do <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em> if <span title ="Exp">E </span> then { <span title ="Stmt">S </span> while <span title ="Exp">E </span> do <span title ="Stmt">S </span> } else { } </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">print ( <div class="textCentered"> <em> <span title ="Val">V </span>  , <span title ="Vals">Vs </span>  </em> <hr class="reduce"/> <em> <span title ="Vals">Vs </span> </em> </div>) ; </div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">out</span> </div><br /><div class="block left defaultColor" > <div class="center"><div class="textCentered"> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div></div> </div> </div>
</div>  when typeOf ( <span title ="Val">V </span> ) ==K int orBool typeOf ( <span title ="Val">V </span> ) ==K string  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> print (  <span title="Vals" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <div class="cell"> <div class="tab straightEdge yellow"><span class = "bold">thread</span> </div><br /><div class="block left right yellow" style="min-width:4.2em"> <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"> <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">holds</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">H </span> </div> </div> </div>
</div> </div> </div>
</em> <hr class="reduce"/> <em>  <span title="Bag" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">busy</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Set">Busy </span> </em> <hr class="reduce"/> <em> <span title ="Set">Busy </span> -Set keys <span title ="Map">H </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> acquire <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">holds</span> </div><br /><div class="block left right defaultColor" > <div class="center"><div class="textCentered"> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Val">V </span> <span text-size="large"> &#x21a6; </span><span title ="#Int"> 0 </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">busy</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Set">Busy </span> <div class="textCentered"> <em>  <span title="Set" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div></div> </div> </div>
</div>  when notBool <span title ="Val">V </span> in <span title ="Set">Busy </span>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> acquire <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">holds</span> </div><br /><div class="block left right defaultColor" > <div class="center"><span title ="Val">V </span> <span text-size="large"> &#x21a6; </span><div class="textCentered"> <em> <span title ="Int">N </span> </em> <hr class="reduce"/> <em> <span title ="Int">N </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> release <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">holds</span> </div><br /><div class="block left right defaultColor" > <div class="center"><span title ="Val">V </span> <span text-size="large"> &#x21a6; </span><div class="textCentered"> <em> <span title ="Int">N </span> </em> <hr class="reduce"/> <em> <span title ="Int">N </span> -Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div>  when <span title ="Int">N </span> >Int <span title ="#Int"> 0 </span> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> release <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">holds</span> </div><br /><div class="block left right defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Val">V </span> <span text-size="large"> &#x21a6; </span><span title ="#Int"> 0 </span> </em> <hr class="reduce"/> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">busy</span> </div><br /><div class="block left right defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Val">V </span> </em> <hr class="reduce"/> <em>  <span title="Set" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> rendezvous <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> rendezvous <span title ="Val">V </span> ; </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Exp </span></td><td> ::= </td> <td>lvalue ( <span class ="italic"> K </span>) </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Val </span></td><td> ::= </td> <td>loc ( <span class ="italic"> Nat </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> lvalue ( <span title ="Id">X </span> ) </em> <hr class="reduce"/> <em> loc ( <span title ="Int">L </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block left right defaultColor" > <div class="center"><span title ="Id">X </span> <span text-size="large"> &#x21a6; </span><span title ="Int">L </span> </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> CONTEXT lvalue ( <span title ="K">_ </span> [ &#9633;] ) </div> <br />
<div> CONTEXT lvalue ( &#9633;[ <span title ="K">_ </span> ] ) </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> lvalue ( lookup ( <span title ="Int">L </span> ) ) </em> <hr class="reduce"/> <em> loc ( <span title ="Int">L </span> ) </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>lookup ( <span class ="italic"> Nat </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> lookup ( <span title ="Int">L </span> ) </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">L </span> <span text-size="large"> &#x21a6; </span><span title ="Val">V </span> </div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>env ( <span class ="italic"> Map </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> env ( <span title ="Map">Env </span> ) </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">_ </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> env ( <span title ="Map">_ </span> ) </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div>&#x219d; env ( <span title ="Map">_ </span> ) </div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Type </span></td><td> ::= </td> <td>typeOf ( <span class ="italic"> K </span>)  [ <span class ="attribute"> function, klabel(typeOf)</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( <span title ="Int">I </span> ) </em> <hr class="reduce"/> <em> int </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( <span title ="Bool">B </span> ) </em> <hr class="reduce"/> <em> bool </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( <span title ="String">_ </span> ) </em> <hr class="reduce"/> <em> string </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( arrayRef ( <span title ="Type">T </span> , <span title ="Nat">_ </span> , <span title ="Nat">_ </span> ) ) </em> <hr class="reduce"/> <em> <span title ="Type">T </span> </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( undefined ( <span title ="Type">T </span> ) ) </em> <hr class="reduce"/> <em> <span title ="Type">T </span> </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( nothing ) </em> <hr class="reduce"/> <em> void </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Types </span></td><td> ::= </td> <td>types ( <span class ="italic"> Exps </span>)  [ <span class ="attribute"> function, klabel(types)</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> types (  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em> <hr class="reduce"/> <em> void  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> types ( <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ) ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) </em> <hr class="reduce"/> <em> <span title ="Type">T </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> types ( <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ) , <span title ="Exp">E </span>  , <span title ="Exps">Es </span>   ) </em> <hr class="reduce"/> <em> <span title ="Type">T </span>  , types ( <span title ="Exp">E </span>  , <span title ="Exps">Es </span>  )  </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> List{K} </span></td><td> ::= </td> <td><span class ="italic"> Int </span>.. <span class ="italic"> Int </span></td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">N1 </span> .. <span title ="Int">N2 </span> </em> <hr class="reduce"/> <em>  <span title="List{K}" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div>  when <span title ="Int">N1 </span> >Int <span title ="Int">N2 </span>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="Int">N1 </span> .. <span title ="Int">N2 </span> </em> <hr class="reduce"/> <em> <span title ="Int">N1 </span> <span class="bold">, </span><span title ="Int">N1 </span> +Int <span title ="#Int"> 1 </span> .. <span title ="Int">N2 </span> </em> </div></div>  when <span title ="Int">N1 </span> &lt;=Int <span title ="Int">N2 </span>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab straightEdge yellow"><span class = "bold">thread</span> </div><br /><div class="block left right yellow" style="min-width:4.2em"> <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> spawn <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">Obj </span> </div> </div> </div>
</div> </div> </div>
<div class="textCentered"> <em>  <span title="Bag" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <div class="cell"> <div class="tab straightEdge yellow"><span class = "bold">thread</span> </div><br /><div class="block left right yellow" style="min-width:4.2em"> <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><span title ="Stmt">S </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">Obj </span> </div> </div> </div>
</div> </div> </div>
</em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> loc ( <span title ="Int">L </span> ) = <span title ="Val">V </span> </em> <hr class="reduce"/> <em> subtype ( typeOf ( <span title ="Val">V </span> )  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , typeOf ( <span title ="K">K </span> )  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) &#x219d; true? &#x219d; unsafeCast ( <span title ="Val">V </span> , typeOf ( <span title ="K">K </span> ) ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">L </span> <span text-size="large"> &#x21a6; </span><div class="textCentered"> <em> <span title ="K">K </span> </em> <hr class="reduce"/> <em> unsafeCast ( <span title ="Val">V </span> , typeOf ( <span title ="K">K </span> ) ) </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> ListItem </span></td><td> ::= </td> <td>( <span class ="italic"> Exp </span>, <span class ="italic"> Stmt </span>, <span class ="italic"> K </span>, <span class ="italic"> Map </span>, <span class ="italic"> Bag </span>) </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>popx </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><div class="textCentered"> <em> try <span title ="Stmt">S1 </span> catch ( <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> )) <span title ="Stmt">S2 </span> </em> <hr class="reduce"/> <em> <span title ="Stmt">S1 </span> &#x219d; popx </em> </div>&#x219d; <span title ="K">K </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">control</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">xstack</span> </div><br /><div class="block right defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> ( <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ), <span title ="Stmt">S2 </span> , <span title ="K">K </span> , <span title ="Map">Env </span> , <span title ="Bag">C </span> ) </em> </div></div> </div> </div>
<span title ="Bag">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> popx </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">xstack</span> </div><br /><div class="block right defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em> <span title ="ListItem">_ </span> </em> <hr class="reduce"/> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><div class="textCentered"> <em> throw <span title ="Val">V </span> ; &#x219d; <span title ="K">_ </span> </em> <hr class="reduce"/> <em> if subtype ( typeOf ( <span title ="Val">V </span> )  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , <span title ="Type">T </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) then { var <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> )= <span title ="Val">V </span>  ,  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ; <span title ="Stmt">S2 </span> } else throw <span title ="Val">V </span> ; &#x219d; <span title ="K">K </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">control</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">xstack</span> </div><br /><div class="block right defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em> ( <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ), <span title ="Stmt">S2 </span> , <span title ="K">K </span> , <span title ="Map">Env </span> , <span title ="Bag">C </span> ) </em> <hr class="reduce"/> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="textCentered"> <em> <span title ="Bag">_ </span> </em> <hr class="reduce"/> <em> <span title ="Bag">C </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">_ </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> </em> </div></div> </div> </div>
</div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>bindto ( <span class ="italic"> Exps </span>, <span class ="italic"> Vals </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Id">X </span> = <span title ="Val">V </span> ; </em> </div>&#x219d; bindto ( <div class="textCentered"> <em> <span title ="KLabel"> '_:_ </span> (<span title ="Id">X </span> <span class="bold">, </span><span title ="Type">T </span> ) , <span title ="Exps">XTs </span>  </em> <hr class="reduce"/> <em> <span title ="Exps">XTs </span> </em> </div>, <div class="textCentered"> <em> <span title ="Val">V </span>  , <span title ="Vals">Vs </span>  </em> <hr class="reduce"/> <em> <span title ="Vals">Vs </span> </em> </div>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> [ <span title ="Int">L </span> / <span title ="Id">X </span> ] </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><div class="textCentered"> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> <span text-size="large"> &#x21a6; </span>undefined ( <span title ="Type">T </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge gray"><span class = "bold">nextLoc</span> </div><br /><div class="block gray" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Int">L </span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> bindto (  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ,  <span title="Vals" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Val </span></td><td> ::= </td> <td>objectClosure ( <span class ="italic"> Bag </span>) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>methodClosure ( <span class ="italic"> Id </span>, <span class ="italic"> Nat </span>, <span class ="italic"> Exps </span>, <span class ="italic"> Stmt </span>, <span class ="italic"> Type </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> class <span title ="Id">Class1 </span> extends <span title ="Id">Class2 </span> { <span title ="Stmts">Ss </span> } </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">classes</span> </div><br /><div class="block left right defaultColor" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em>  <span title="Bag" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">class</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">className</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class1 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">extends</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Id">Class2 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">declarations</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><span title ="Stmts">Ss </span> </div> </div> </div>
</div> </div> </div>
</em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>execute </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><div class="textCentered"> <em> execute </em> <hr class="reduce"/> <em> new main (  <span title="Exps" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) ; </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"> <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> method <span title ="Id">F </span> ( <span title ="Exps">XTs </span> ) : <span title ="Type">T </span> <span title ="Stmt">S </span> </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">location</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Int">OL </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> [ <span title ="Int">L </span> / <span title ="Id">F </span> ] </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><div class="textCentered"> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> <span text-size="large"> &#x21a6; </span>methodClosure ( <span title ="Id">Class </span> , <span title ="Int">OL </span> , <span title ="Exps">XTs </span> , <span title ="Stmt">S </span> , function from types ( <span title ="Exps">XTs </span> ) to <span title ="Type">T </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge gray"><span class = "bold">nextLoc</span> </div><br /><div class="block gray" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Int">L </span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><div class="textCentered"> <em> <span title ="KLabel"> 'new_`(_`) </span> (<span title ="Id">Class </span> <span class="bold">, </span><span title ="Vals">Vs </span> )&#x219d; <span title ="K">K </span> </em> <hr class="reduce"/> <em> create ( <span title ="Id">Class </span> ) &#x219d; storeObj &#x219d; <span title ="KLabel"> '_`(_`) </span> (<span title ="Id">Class </span> <span class="bold">, </span><span title ="Vals">Vs </span> ); return this ; </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">control</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">C </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Bag">Obj </span> </em> <hr class="reduce"/> <em> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">object </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">object :: <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"> <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">location</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Int">L </span> </div> </div> </div>
</em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">return</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em> <span title ="Type">T </span> </em> <hr class="reduce"/> <em> class <span title ="Id">Class </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">fstack</span> </div><br /><div class="block right defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> ( <span title ="Map">Env </span> , <span title ="K">K </span> , <span title ="Bag">C </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">return</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="Type">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">Obj </span> </div> </div> </div>
) </em> </div></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge gray"><span class = "bold">nextLoc</span> </div><br /><div class="block gray" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Int">L </span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> +Int <span title ="#Int"> 1 </span> </em> </div></div> </div> </div>
</div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>create ( <span class ="italic"> K </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> create ( <span title ="Id">Class </span> ) </em> <hr class="reduce"/> <em> create ( <span title ="Id">Class1 </span> ) &#x219d; setCrntClass ( <span title ="Id">Class </span> ) &#x219d; <span title ="Stmts">Ss </span> &#x219d; addEnvLayer </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">className</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">extends</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Id">Class1 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">declarations</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><span title ="Stmts">Ss </span> </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> create ( object ) </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>setCrntClass ( <span class ="italic"> Id </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> setCrntClass ( <span title ="K">Class </span> ) </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><div class="textCentered"> <em> <span title ="K">_ </span> </em> <hr class="reduce"/> <em> <span title ="K">Class </span> </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>addEnvLayer </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> addEnvLayer </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block right defaultColor" style="min-width:5.6em"> <div class="center"><div class="textCentered"> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Id">Class </span> :: <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>storeObj </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> storeObj </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">Obj </span> <div class="textCentered"> <em> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">location</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Int">L </span> </div> </div> </div>
</em> <hr class="reduce"/> <em>  <span title="Bag" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><div class="textCentered"> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> <span title ="Int">L </span> <span text-size="large"> &#x21a6; </span>objectClosure ( <span title ="Bag">Obj </span> ) </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> this </em> <hr class="reduce"/> <em> objectClosure ( <span title ="Bag">Obj </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">Obj </span> </div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> <span title ="Id">X </span> </em> <hr class="reduce"/> <em> <span title ="KLabel"> '_._ </span> (this <span class="bold">, </span><span title ="Id">X </span> )</em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</div>  when notBool <span title ="Id">X </span> in keys <span title ="Map">Env </span>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> CONTEXT <span title ="KLabel"> '_._ </span> (&#9633;<span class="bold">, </span><span title ="List{K}">_ </span> ) when &#9633;=/=K super </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> <span title ="KLabel"> '_._ </span> (objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block left defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="BagItem">EnvC </span> <span title ="List">EStack </span> </div> </div> </div>
) <span class="bold">, </span><span title ="Id">X </span> )</em> <hr class="reduce"/> <em> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="BagItem">EnvC </span> <span title ="List">EStack </span> </div> </div> </div>
, <span title ="Id">X </span> ) </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> <span title ="KLabel"> '_._ </span> (super <span class="bold">, </span><span title ="Id">X </span> )</em> <hr class="reduce"/> <em> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="List">EStack </span> </div> </div> </div>
, <span title ="Id">X </span> ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block left defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="BagItem">EnvC </span> <span title ="List">EStack </span> </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><span title ="KLabel"> '_`(_`) </span> (<div class="textCentered"> <em> <span title ="Id">X </span> </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div><span class="bold">, </span><span title ="List{K}">_ </span> )</div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block left right defaultColor" > <div class="center"><span title ="Id">X </span> <span text-size="large"> &#x21a6; </span><span title ="Int">L </span> </div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">L </span> <span text-size="large"> &#x21a6; </span><span title ="Val">V </span> </div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><span title ="KLabel"> '_`(_`) </span> (<div class="textCentered"> <em> <span title ="Id">X </span> </em> <hr class="reduce"/> <em> <span title ="KLabel"> '_._ </span> (this <span class="bold">, </span><span title ="Id">X </span> )</em> </div><span class="bold">, </span><span title ="List{K}">_ </span> )</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</div>  when notBool <span title ="Id">X </span> in keys <span title ="Map">Env </span>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> CONTEXT <span title ="KLabel"> '_`(_`) </span> (<span title ="KLabel"> '_._ </span> (&#9633;<span class="bold">, </span><span title ="List{K}">_ </span> )<span class="bold">, </span><span title ="List{K}">_ </span> ) when &#9633;=/=K super </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><span title ="KLabel"> '_`(_`) </span> (<div class="textCentered"> <em> <span title ="KLabel"> '_._ </span> (objectClosure ( <span title ="Bag">Obj </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="List">EStack </span> </div> </div> </div>
) <span class="bold">, </span><span title ="Id">X </span> )</em> <hr class="reduce"/> <em> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="List">EStack </span> </div> </div> </div>
, <span title ="Id">X </span> ) </em> </div><span class="bold">, </span><span title ="List{K}">_ </span> )</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><span title ="KLabel"> '_`(_`) </span> (<div class="textCentered"> <em> <span title ="KLabel"> '_._ </span> (super <span class="bold">, </span><span title ="Id">X </span> )</em> <hr class="reduce"/> <em> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="List">EStack </span> </div> </div> </div>
, <span title ="Id">X </span> ) </em> </div><span class="bold">, </span><span title ="List{K}">_ </span> )</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block left defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="Bag">_ </span> <span title ="List">EStack </span> </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> CONTEXT <span title ="KLabel"> '_`(_`) </span> (&#9633;<span class="bold">, </span><span title ="List{K}">_ </span> ) when getKLabel &#9633;==KLabel <span title ="KLabel"> '_`(_`) </span> orBool getKLabel &#9633;==KLabel <span title ="KLabel"> '_`[_`] </span> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><span title ="KLabel"> '_`(_`) </span> (<div class="textCentered"> <em> lookup ( <span title ="Int">L </span> ) </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div><span class="bold">, </span><span title ="List{K}">_ </span> )</div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">L </span> <span text-size="large"> &#x21a6; </span><span title ="Val">V </span> </div> </div> </div>
</div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>( <span class ="italic"> Map </span>, <span class ="italic"> K </span>, <span class ="italic"> Bag </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><div class="textCentered"> <em> <span title ="KLabel"> '_`(_`) </span> (methodClosure ( <span title ="Id">Class </span> , <span title ="Int">OL </span> , <span title ="Exps">XTs </span> , <span title ="Stmt">S </span> , function from <span title ="K">_ </span> to <span title ="Type">T </span> ) <span class="bold">, </span><span title ="Vals">Vs </span> )&#x219d; <span title ="K">K </span> </em> <hr class="reduce"/> <em> bindto ( <span title ="Exps">XTs </span> , <span title ="Vals">Vs </span> ) &#x219d; <span title ="Stmt">S </span> &#x219d; return ; </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">control</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">C </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">fstack</span> </div><br /><div class="block right defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> <hr class="reduce"/> <em> ( <span title ="Map">Env </span> , <span title ="K">K </span> , <span title ="Bag">C </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bag">Obj' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">return</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="Type">T' </span> </div> </div> </div>
) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntObj</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="textCentered"> <em> <span title ="Bag">Obj' </span> </em> <hr class="reduce"/> <em> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<span title ="Bag">Obj </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">return</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em> <span title ="Type">T' </span> </em> <hr class="reduce"/> <em> <span title ="Type">T </span> </em> </div></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">Env </span> </em> <hr class="reduce"/> <em>  <span title="Map" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab straightEdge white"><span class = "bold">store</span> </div><br /><div class="block left right white" > <div class="center"><span title ="Int">OL </span> <span text-size="large"> &#x21a6; </span>objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">_ </span> </div> </div> </div>
<span title ="Bag">Obj </span> ) </div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><div class="textCentered"> <em> return <span title ="Val">V </span> ; &#x219d; <span title ="K">_ </span> </em> <hr class="reduce"/> <em> subtype ( typeOf ( <span title ="Val">V </span> )  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , <span title ="Type">T </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) &#x219d; true? &#x219d; unsafeCast ( <span title ="Val">V </span> , <span title ="Type">T </span> ) &#x219d; <span title ="K">K </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">control</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">fstack</span> </div><br /><div class="block right defaultColor" style="min-width:4.2em"> <div class="center"><div class="textCentered"> <em> ( <span title ="Map">Env </span> , <span title ="K">K </span> , <span title ="Bag">C </span> ) </em> <hr class="reduce"/> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
<div class="textCentered"> <em> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">return</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="Type">T </span> </div> </div> </div>
<span title ="Bag">_ </span> </em> <hr class="reduce"/> <em> <span title ="Bag">C </span> </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><div class="textCentered"> <em> <span title ="Map">_ </span> </em> <hr class="reduce"/> <em> <span title ="Map">Env </span> </em> </div></div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> objectClosure ( <span title ="Bag">_ </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block right defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="Bag">_ </span> </div> </div> </div>
) instanceOf <span title ="Id">Class </span> </em> <hr class="reduce"/> <em> <span title ="#Bool"> true </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> objectClosure ( <span title ="Bag">_ </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block right defaultColor" style="min-width:5.6em"> <div class="center"><div class="textCentered"> <em> <span title ="Id">Class1 </span> :: <span title ="Bag">_ </span> </em> <hr class="reduce"/> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
) instanceOf <span title ="Id">Class2 </span> </div>  when <span title ="Id">Class1 </span> =/=K <span title ="Id">Class2 </span>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> objectClosure ( <span title ="Bag">_ </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"> <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
) instanceOf <span title ="K">Class </span> </em> <hr class="reduce"/> <em> <span title ="#Bool"> false </span> </em> </div></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> cast objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">_ </span> </div> </div> </div>
<span title ="Bag">Obj </span> ) to <span title ="Id">Class </span> </em> <hr class="reduce"/> <em> objectClosure ( <span title ="Bag">Obj </span> ) instanceOf <span title ="Id">Class </span> &#x219d; true? &#x219d; objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<span title ="Bag">Obj </span> ) </em> </div></div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">lvalue ( <div class="textCentered"> <em> <span title ="Id">X </span> </em> <hr class="reduce"/> <em> <span title ="KLabel"> '_._ </span> (this <span class="bold">, </span><span title ="Id">X </span> )</em> </div>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</div>  when notBool <span title ="Id">X </span> in keys <span title ="Map">Env </span>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> CONTEXT lvalue ( <span title ="KLabel"> '_._ </span> (&#9633;<span class="bold">, </span><span title ="Id">_ </span> )) </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">lvalue ( <div class="textCentered"> <em> <span title ="KLabel"> '_._ </span> (objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block left defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="BagItem">EnvC </span> <span title ="List">EStack </span> </div> </div> </div>
) <span class="bold">, </span><span title ="Id">X </span> )</em> <hr class="reduce"/> <em> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="BagItem">EnvC </span> <span title ="List">EStack </span> </div> </div> </div>
, <span title ="Id">X </span> ) </em> </div>) </div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td><span class ="italic"> Id </span>:: <span class ="italic"> Bag </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>lookupMember ( <span class ="italic"> BagItem </span>, <span class ="italic"> Id </span>)  [ <span class ="attribute"> function, klabel(lookupMember)</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block right defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">_ </span> :: <div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block left right defaultColor" > <div class="center"><span title ="Id">X </span> <span text-size="large"> &#x21a6; </span><span title ="Int">L </span> </div> </div> </div>
</div> </div> </div>
, <span title ="Id">X </span> ) </em> <hr class="reduce"/> <em> lookup ( <span title ="Int">L </span> ) </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> lookupMember ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block right defaultColor" style="min-width:5.6em"> <div class="center"><div class="textCentered"> <em> <span title ="Id">_ </span> :: <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">Env </span> </div> </div> </div>
</em> <hr class="reduce"/> <em>  <span title="List" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div> </div> </div>
, <span title ="Id">X </span> ) </div>  when notBool <span title ="Id">X </span> in keys <span title ="Map">Env </span>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( objectClosure ( <span title ="Bag">_ </span> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">envStack</span> </div><br /><div class="block right defaultColor" style="min-width:5.6em"> <div class="center"><span title ="Id">Class </span> :: <span title ="Bag">_ </span> </div> </div> </div>
) ) </em> <hr class="reduce"/> <em> class <span title ="Id">Class </span> </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> typeOf ( methodClosure ( <span title ="Id">_ </span> , <span title ="Nat">_ </span> , <span title ="K">_ </span> , <span title ="K">_ </span> , <span title ="Type">T </span> ) ) </em> <hr class="reduce"/> <em> <span title ="Type">T </span> </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Exp </span></td><td> ::= </td> <td>subtype ( <span class ="italic"> Types </span>, <span class ="italic"> Types </span>) </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> subtype ( <span title ="Type">T </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , <span title ="Type">T </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) </em> <hr class="reduce"/> <em> <span title ="#Bool"> true </span> </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><div class="textCentered"> <em> subtype ( class <span title ="Id">Class1 </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , class <span title ="Id">Class </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) </em> <hr class="reduce"/> <em> subtype ( class <span title ="K">Class2 </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , class <span title ="Id">Class </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) </em> </div></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">className</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class1 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">extends</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">Class2 </span> </div> </div> </div>
</div>  when <span title ="Id">Class1 </span> =/=K <span title ="Id">Class </span>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> subtype ( <span title ="Type">T1 </span>  , <span title ="Type">T2 </span>  , <span title ="Types">Ts </span>   , <span title ="Type">T1' </span>  , <span title ="Type">T2' </span>  , <span title ="Types">Ts' </span>   ) </em> <hr class="reduce"/> <em> subtype ( <span title ="Type">T1 </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , <span title ="Type">T1' </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) &#x219d; true? &#x219d; subtype ( <span title ="Type">T2 </span>  , <span title ="Types">Ts </span>  , <span title ="Type">T2' </span>  , <span title ="Types">Ts' </span>  ) </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> subtype (  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em> <hr class="reduce"/> <em> <span title ="#Bool"> true </span> </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> subtype ( class object  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  , class <span title ="K">Class </span>  ,  <span title="Types" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  ) </em> <hr class="reduce"/> <em> <span title ="#Bool"> false </span> </em> </div></div>  when <span title ="K">Class </span> =/=K object  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Val </span></td><td> ::= </td> <td>unsafeCast ( <span class ="italic"> Val </span>, <span class ="italic"> Type </span>)  [ <span class ="attribute"> function, klabel(unsafeCast)</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> unsafeCast ( objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">_ </span> </div> </div> </div>
<span title ="Bag">Obj </span> ) , class <span title ="Id">Class </span> ) </em> <hr class="reduce"/> <em> objectClosure ( <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">crntClass</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Id">Class </span> </div> </div> </div>
<span title ="Bag">Obj </span> ) </em> </div></div>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> unsafeCast ( <span title ="Val">V </span> , <span title ="Type">T </span> ) </em> <hr class="reduce"/> <em> <span title ="Val">V </span> </em> </div></div>  when typeOf ( <span title ="Val">V </span> ) ==K <span title ="Type">T </span>  [ <span class ="attribute"> anywhere</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> K </span></td><td> ::= </td> <td>true? </td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <div class="textCentered"> <em> <span title ="#Bool"> true </span> &#x219d; true? </em> <hr class="reduce"/> <em>  <span title="K" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </em> </div></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
END MODULE </div>
<br />
</body>
</html>
