

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyk.kcfg.kcfg &mdash; pyk 7.1.301 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=6b5438ee"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            pyk
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">pyk</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pyk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">pyk.kcfg.kcfg</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pyk.kcfg.kcfg</h1><div class="highlight"><pre>
<span></span><span class="linenos">   1</span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
<span class="linenos">   2</span>
<span class="linenos">   3</span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="linenos">   4</span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="linenos">   5</span><span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="linenos">   6</span><span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Container</span>
<span class="linenos">   7</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="linenos">   8</span><span class="kn">from</span><span class="w"> </span><span class="nn">threading</span><span class="w"> </span><span class="kn">import</span> <span class="n">RLock</span>
<span class="linenos">   9</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span><span class="p">,</span> <span class="n">Final</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">final</span>
<span class="linenos">  10</span>
<span class="linenos">  11</span><span class="kn">from</span><span class="w"> </span><span class="nn">..cterm</span><span class="w"> </span><span class="kn">import</span> <span class="n">CSubst</span><span class="p">,</span> <span class="n">CTerm</span><span class="p">,</span> <span class="n">cterm_build_claim</span><span class="p">,</span> <span class="n">cterm_build_rule</span>
<span class="linenos">  12</span><span class="kn">from</span><span class="w"> </span><span class="nn">..kast</span><span class="w"> </span><span class="kn">import</span> <span class="n">EMPTY_ATT</span>
<span class="linenos">  13</span><span class="kn">from</span><span class="w"> </span><span class="nn">..kast.inner</span><span class="w"> </span><span class="kn">import</span> <span class="n">KApply</span>
<span class="linenos">  14</span><span class="kn">from</span><span class="w"> </span><span class="nn">..kast.manip</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<span class="linenos">  15</span>    <span class="n">bool_to_ml_pred</span><span class="p">,</span>
<span class="linenos">  16</span>    <span class="n">extract_lhs</span><span class="p">,</span>
<span class="linenos">  17</span>    <span class="n">extract_rhs</span><span class="p">,</span>
<span class="linenos">  18</span>    <span class="n">inline_cell_maps</span><span class="p">,</span>
<span class="linenos">  19</span>    <span class="n">minimize_rule_like</span><span class="p">,</span>
<span class="linenos">  20</span>    <span class="n">rename_generated_vars</span><span class="p">,</span>
<span class="linenos">  21</span>    <span class="n">sort_ac_collections</span><span class="p">,</span>
<span class="linenos">  22</span><span class="p">)</span>
<span class="linenos">  23</span><span class="kn">from</span><span class="w"> </span><span class="nn">..kast.outer</span><span class="w"> </span><span class="kn">import</span> <span class="n">KFlatModule</span>
<span class="linenos">  24</span><span class="kn">from</span><span class="w"> </span><span class="nn">..kast.prelude.kbool</span><span class="w"> </span><span class="kn">import</span> <span class="n">andBool</span>
<span class="linenos">  25</span><span class="kn">from</span><span class="w"> </span><span class="nn">..utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">ensure_dir_path</span><span class="p">,</span> <span class="n">not_none</span>
<span class="linenos">  26</span>
<span class="linenos">  27</span><span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
<span class="linenos">  28</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">collections.abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">MutableMapping</span>
<span class="linenos">  29</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="linenos">  30</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">types</span><span class="w"> </span><span class="kn">import</span> <span class="n">TracebackType</span>
<span class="linenos">  31</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<span class="linenos">  32</span>
<span class="linenos">  33</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">..kast</span><span class="w"> </span><span class="kn">import</span> <span class="n">KAtt</span>
<span class="linenos">  34</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">..kast.inner</span><span class="w"> </span><span class="kn">import</span> <span class="n">KInner</span>
<span class="linenos">  35</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">..kast.outer</span><span class="w"> </span><span class="kn">import</span> <span class="n">KClaim</span><span class="p">,</span> <span class="n">KDefinition</span><span class="p">,</span> <span class="n">KImport</span><span class="p">,</span> <span class="n">KRuleLike</span>
<span class="linenos">  36</span>    <span class="kn">from</span><span class="w"> </span><span class="nn">..kore.rpc</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogEntry</span>
<span class="linenos">  37</span>
<span class="linenos">  38</span>
<span class="linenos">  39</span><span class="n">NodeIdLike</span> <span class="o">=</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span>
<span class="linenos">  40</span>
<span class="linenos">  41</span><span class="n">_LOGGER</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="linenos">  42</span>
<span class="linenos">  43</span>
<div class="viewcode-block" id="NodeAttr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.NodeAttr">[docs]</a>
<span class="linenos">  44</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">  45</span><span class="k">class</span><span class="w"> </span><span class="nc">NodeAttr</span><span class="p">:</span>
<span class="linenos">  46</span>    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span></div>

<span class="linenos">  47</span>
<span class="linenos">  48</span>
<div class="viewcode-block" id="KCFGNodeAttr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGNodeAttr">[docs]</a>
<span class="linenos">  49</span><span class="k">class</span><span class="w"> </span><span class="nc">KCFGNodeAttr</span><span class="p">(</span><span class="n">NodeAttr</span><span class="p">):</span>
<span class="linenos">  50</span>    <span class="n">VACUOUS</span> <span class="o">=</span> <span class="n">NodeAttr</span><span class="p">(</span><span class="s1">&#39;vacuous&#39;</span><span class="p">)</span>
<span class="linenos">  51</span>    <span class="n">STUCK</span> <span class="o">=</span> <span class="n">NodeAttr</span><span class="p">(</span><span class="s1">&#39;stuck&#39;</span><span class="p">)</span></div>

<span class="linenos">  52</span>
<span class="linenos">  53</span>
<div class="viewcode-block" id="KCFGStore">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGStore">[docs]</a>
<span class="linenos">  54</span><span class="k">class</span><span class="w"> </span><span class="nc">KCFGStore</span><span class="p">:</span>
<span class="linenos">  55</span>    <span class="n">store_path</span><span class="p">:</span> <span class="n">Path</span>
<span class="linenos">  56</span>
<span class="linenos">  57</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">store_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">  58</span>        <span class="bp">self</span><span class="o">.</span><span class="n">store_path</span> <span class="o">=</span> <span class="n">store_path</span>
<span class="linenos">  59</span>        <span class="n">ensure_dir_path</span><span class="p">(</span><span class="n">store_path</span><span class="p">)</span>
<span class="linenos">  60</span>        <span class="n">ensure_dir_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kcfg_node_dir</span><span class="p">)</span>
<span class="linenos">  61</span>
<span class="linenos">  62</span>    <span class="nd">@property</span>
<span class="linenos">  63</span>    <span class="k">def</span><span class="w"> </span><span class="nf">kcfg_json_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="linenos">  64</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_path</span> <span class="o">/</span> <span class="s1">&#39;kcfg.json&#39;</span>
<span class="linenos">  65</span>
<span class="linenos">  66</span>    <span class="nd">@property</span>
<span class="linenos">  67</span>    <span class="k">def</span><span class="w"> </span><span class="nf">kcfg_node_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="linenos">  68</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">store_path</span> <span class="o">/</span> <span class="s1">&#39;nodes&#39;</span>
<span class="linenos">  69</span>
<div class="viewcode-block" id="KCFGStore.kcfg_node_path">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGStore.kcfg_node_path">[docs]</a>
<span class="linenos">  70</span>    <span class="k">def</span><span class="w"> </span><span class="nf">kcfg_node_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="linenos">  71</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kcfg_node_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s1">.json&#39;</span></div>

<span class="linenos">  72</span>
<div class="viewcode-block" id="KCFGStore.write_cfg_data">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGStore.write_cfg_data">[docs]</a>
<span class="linenos">  73</span>    <span class="k">def</span><span class="w"> </span><span class="nf">write_cfg_data</span><span class="p">(</span>
<span class="linenos">  74</span>        <span class="bp">self</span><span class="p">,</span> <span class="n">kcfg</span><span class="p">:</span> <span class="n">KCFG</span><span class="p">,</span> <span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">deleted_nodes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span> <span class="n">created_nodes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
<span class="linenos">  75</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">  76</span>        <span class="n">vacuous_nodes</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">  77</span>            <span class="n">node_id</span> <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">kcfg</span><span class="o">.</span><span class="n">_nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">VACUOUS</span> <span class="ow">in</span> <span class="n">kcfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span>
<span class="linenos">  78</span>        <span class="p">]</span>
<span class="linenos">  79</span>        <span class="n">stuck_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">node_id</span> <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">kcfg</span><span class="o">.</span><span class="n">_nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">STUCK</span> <span class="ow">in</span> <span class="n">kcfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">]</span>
<span class="linenos">  80</span>        <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;vacuous&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vacuous_nodes</span>
<span class="linenos">  81</span>        <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;stuck&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stuck_nodes</span>
<span class="linenos">  82</span>        <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">deleted_nodes</span><span class="p">:</span>
<span class="linenos">  83</span>            <span class="bp">self</span><span class="o">.</span><span class="n">kcfg_node_path</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">missing_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">  84</span>        <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">created_nodes</span><span class="p">:</span>
<span class="linenos">  85</span>            <span class="bp">self</span><span class="o">.</span><span class="n">kcfg_node_path</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kcfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()))</span>
<span class="linenos">  86</span>        <span class="bp">self</span><span class="o">.</span><span class="n">kcfg_json_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dct</span><span class="p">))</span></div>

<span class="linenos">  87</span>
<div class="viewcode-block" id="KCFGStore.read_cfg_data">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGStore.read_cfg_data">[docs]</a>
<span class="linenos">  88</span>    <span class="k">def</span><span class="w"> </span><span class="nf">read_cfg_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos">  89</span>        <span class="n">dct</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kcfg_json_path</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
<span class="linenos">  90</span>        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">read_node_data</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span> <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]]</span>
<span class="linenos">  91</span>        <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span>
<span class="linenos">  92</span>
<span class="linenos">  93</span>        <span class="n">new_nodes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">  94</span>        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]:</span>
<span class="linenos">  95</span>            <span class="n">attrs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">  96</span>            <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;vacuous&#39;</span><span class="p">]:</span>
<span class="linenos">  97</span>                <span class="n">attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">VACUOUS</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="linenos">  98</span>            <span class="k">if</span> <span class="n">node</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;stuck&#39;</span><span class="p">]:</span>
<span class="linenos">  99</span>                <span class="n">attrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">STUCK</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="linenos"> 100</span>            <span class="n">new_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="s1">&#39;cterm&#39;</span><span class="p">:</span> <span class="n">node</span><span class="p">[</span><span class="s1">&#39;cterm&#39;</span><span class="p">],</span> <span class="s1">&#39;attrs&#39;</span><span class="p">:</span> <span class="n">attrs</span><span class="p">})</span>
<span class="linenos"> 101</span>
<span class="linenos"> 102</span>        <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;nodes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_nodes</span>
<span class="linenos"> 103</span>
<span class="linenos"> 104</span>        <span class="k">del</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;vacuous&#39;</span><span class="p">]</span>
<span class="linenos"> 105</span>        <span class="k">del</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;stuck&#39;</span><span class="p">]</span>
<span class="linenos"> 106</span>
<span class="linenos"> 107</span>        <span class="k">return</span> <span class="n">dct</span></div>

<span class="linenos"> 108</span>
<div class="viewcode-block" id="KCFGStore.read_node_data">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGStore.read_node_data">[docs]</a>
<span class="linenos"> 109</span>    <span class="k">def</span><span class="w"> </span><span class="nf">read_node_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 110</span>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kcfg_node_path</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span></div>
</div>

<span class="linenos"> 111</span>
<span class="linenos"> 112</span>
<div class="viewcode-block" id="KCFG">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG">[docs]</a>
<span class="linenos"> 113</span><span class="k">class</span><span class="w"> </span><span class="nc">KCFG</span><span class="p">(</span><span class="n">Container</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="s1">&#39;KCFG.Node&#39;</span><span class="p">,</span> <span class="s1">&#39;KCFG.Successor&#39;</span><span class="p">]]):</span>
<div class="viewcode-block" id="KCFG.Node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node">[docs]</a>
<span class="linenos"> 114</span>    <span class="nd">@final</span>
<span class="linenos"> 115</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 116</span>    <span class="k">class</span><span class="w"> </span><span class="nc">Node</span><span class="p">:</span>
<span class="linenos"> 117</span>        <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
<span class="linenos"> 118</span>        <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span>
<span class="linenos"> 119</span>        <span class="n">attrs</span><span class="p">:</span> <span class="nb">frozenset</span><span class="p">[</span><span class="n">NodeAttr</span><span class="p">]</span>
<span class="linenos"> 120</span>
<span class="linenos"> 121</span>        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">NodeAttr</span><span class="p">]</span> <span class="o">=</span> <span class="p">())</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 122</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
<span class="linenos"> 123</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;cterm&#39;</span><span class="p">,</span> <span class="n">cterm</span><span class="p">)</span>
<span class="linenos"> 124</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;attrs&#39;</span><span class="p">,</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">attrs</span><span class="p">))</span>
<span class="linenos"> 125</span>
<div class="viewcode-block" id="KCFG.Node.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node.to_dict">[docs]</a>
<span class="linenos"> 126</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 127</span>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">&#39;cterm&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="s1">&#39;attrs&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">attr</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">]}</span></div>

<span class="linenos"> 128</span>
<div class="viewcode-block" id="KCFG.Node.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node.from_dict">[docs]</a>
<span class="linenos"> 129</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 130</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 131</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">CTerm</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;cterm&#39;</span><span class="p">]),</span> <span class="p">[</span><span class="n">NodeAttr</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;attrs&#39;</span><span class="p">]])</span></div>

<span class="linenos"> 132</span>
<div class="viewcode-block" id="KCFG.Node.add_attr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node.add_attr">[docs]</a>
<span class="linenos"> 133</span>        <span class="k">def</span><span class="w"> </span><span class="nf">add_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="n">NodeAttr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 134</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cterm</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">attr</span><span class="p">])</span></div>

<span class="linenos"> 135</span>
<div class="viewcode-block" id="KCFG.Node.remove_attr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node.remove_attr">[docs]</a>
<span class="linenos"> 136</span>        <span class="k">def</span><span class="w"> </span><span class="nf">remove_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="n">NodeAttr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 137</span>            <span class="k">if</span> <span class="n">attr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="p">:</span>
<span class="linenos"> 138</span>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Node </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> does not have attribute </span><span class="si">{</span><span class="n">attr</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 139</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cterm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">difference</span><span class="p">([</span><span class="n">attr</span><span class="p">]))</span></div>

<span class="linenos"> 140</span>
<div class="viewcode-block" id="KCFG.Node.discard_attr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node.discard_attr">[docs]</a>
<span class="linenos"> 141</span>        <span class="k">def</span><span class="w"> </span><span class="nf">discard_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="n">NodeAttr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 142</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cterm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">difference</span><span class="p">([</span><span class="n">attr</span><span class="p">]))</span></div>

<span class="linenos"> 143</span>
<div class="viewcode-block" id="KCFG.Node.let">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Node.let">[docs]</a>
<span class="linenos"> 144</span>        <span class="k">def</span><span class="w"> </span><span class="nf">let</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFGNodeAttr</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 145</span>            <span class="n">new_cterm</span> <span class="o">=</span> <span class="n">cterm</span> <span class="k">if</span> <span class="n">cterm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">cterm</span>
<span class="linenos"> 146</span>            <span class="n">new_attrs</span> <span class="o">=</span> <span class="n">attrs</span> <span class="k">if</span> <span class="n">attrs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">attrs</span>
<span class="linenos"> 147</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">new_cterm</span><span class="p">,</span> <span class="n">new_attrs</span><span class="p">)</span></div>

<span class="linenos"> 148</span>
<span class="linenos"> 149</span>        <span class="nd">@property</span>
<span class="linenos"> 150</span>        <span class="k">def</span><span class="w"> </span><span class="nf">free_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">frozenset</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="linenos"> 151</span>            <span class="k">return</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">free_vars</span><span class="p">)</span></div>

<span class="linenos"> 152</span>
<div class="viewcode-block" id="KCFG.Successor">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Successor">[docs]</a>
<span class="linenos"> 153</span>    <span class="k">class</span><span class="w"> </span><span class="nc">Successor</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="linenos"> 154</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 155</span>
<span class="linenos"> 156</span>        <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 157</span>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">):</span>
<span class="linenos"> 158</span>                <span class="k">return</span> <span class="bp">NotImplemented</span>
<span class="linenos"> 159</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">source</span>
<span class="linenos"> 160</span>
<span class="linenos"> 161</span>        <span class="nd">@property</span>
<span class="linenos"> 162</span>        <span class="k">def</span><span class="w"> </span><span class="nf">source_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">frozenset</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="linenos"> 163</span>            <span class="k">return</span> <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">free_vars</span><span class="p">)</span>
<span class="linenos"> 164</span>
<span class="linenos"> 165</span>        <span class="nd">@property</span>
<span class="linenos"> 166</span>        <span class="nd">@abstractmethod</span>
<span class="linenos"> 167</span>        <span class="k">def</span><span class="w"> </span><span class="nf">targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span> <span class="o">...</span>
<span class="linenos"> 168</span>
<span class="linenos"> 169</span>        <span class="nd">@property</span>
<span class="linenos"> 170</span>        <span class="k">def</span><span class="w"> </span><span class="nf">target_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="linenos"> 171</span>            <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">)</span>
<span class="linenos"> 172</span>
<span class="linenos"> 173</span>        <span class="nd">@property</span>
<span class="linenos"> 174</span>        <span class="k">def</span><span class="w"> </span><span class="nf">target_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">frozenset</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="linenos"> 175</span>            <span class="k">return</span> <span class="nb">frozenset</span><span class="p">(</span><span class="nb">set</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="nb">set</span><span class="p">(),</span> <span class="o">*</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">free_vars</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">)))</span>
<span class="linenos"> 176</span>
<div class="viewcode-block" id="KCFG.Successor.replace_source">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Successor.replace_source">[docs]</a>
<span class="linenos"> 177</span>        <span class="nd">@abstractmethod</span>
<span class="linenos"> 178</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">:</span> <span class="o">...</span></div>

<span class="linenos"> 179</span>
<div class="viewcode-block" id="KCFG.Successor.replace_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Successor.replace_target">[docs]</a>
<span class="linenos"> 180</span>        <span class="nd">@abstractmethod</span>
<span class="linenos"> 181</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">:</span> <span class="o">...</span></div>

<span class="linenos"> 182</span>
<div class="viewcode-block" id="KCFG.Successor.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Successor.to_dict">[docs]</a>
<span class="linenos"> 183</span>        <span class="nd">@abstractmethod</span>
<span class="linenos"> 184</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span> <span class="o">...</span></div>

<span class="linenos"> 185</span>
<div class="viewcode-block" id="KCFG.Successor.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Successor.from_dict">[docs]</a>
<span class="linenos"> 186</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 187</span>        <span class="nd">@abstractmethod</span>
<span class="linenos"> 188</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">:</span> <span class="o">...</span></div>
</div>

<span class="linenos"> 189</span>
<div class="viewcode-block" id="KCFG.EdgeLike">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.EdgeLike">[docs]</a>
<span class="linenos"> 190</span>    <span class="k">class</span><span class="w"> </span><span class="nc">EdgeLike</span><span class="p">(</span><span class="n">Successor</span><span class="p">):</span>
<span class="linenos"> 191</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 192</span>        <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 193</span>
<span class="linenos"> 194</span>        <span class="nd">@property</span>
<span class="linenos"> 195</span>        <span class="k">def</span><span class="w"> </span><span class="nf">targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="linenos"> 196</span>            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,)</span></div>

<span class="linenos"> 197</span>
<div class="viewcode-block" id="KCFG.Edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Edge">[docs]</a>
<span class="linenos"> 198</span>    <span class="nd">@final</span>
<span class="linenos"> 199</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 200</span>    <span class="k">class</span><span class="w"> </span><span class="nc">Edge</span><span class="p">(</span><span class="n">EdgeLike</span><span class="p">):</span>
<span class="linenos"> 201</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 202</span>        <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 203</span>        <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span>
<span class="linenos"> 204</span>        <span class="n">rules</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos"> 205</span>
<div class="viewcode-block" id="KCFG.Edge.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Edge.to_dict">[docs]</a>
<span class="linenos"> 206</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 207</span>            <span class="k">return</span> <span class="p">{</span>
<span class="linenos"> 208</span>                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 209</span>                <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 210</span>                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span>
<span class="linenos"> 211</span>                <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">),</span>
<span class="linenos"> 212</span>            <span class="p">}</span></div>

<span class="linenos"> 213</span>
<div class="viewcode-block" id="KCFG.Edge.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Edge.from_dict">[docs]</a>
<span class="linenos"> 214</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 215</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 216</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]],</span> <span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;rules&#39;</span><span class="p">]))</span></div>

<span class="linenos"> 217</span>
<div class="viewcode-block" id="KCFG.Edge.to_rule">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Edge.to_rule">[docs]</a>
<span class="linenos"> 218</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_rule</span><span class="p">(</span>
<span class="linenos"> 219</span>            <span class="bp">self</span><span class="p">,</span>
<span class="linenos"> 220</span>            <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="linenos"> 221</span>            <span class="n">claim</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="linenos"> 222</span>            <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 223</span>            <span class="n">defunc_with</span><span class="p">:</span> <span class="n">KDefinition</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 224</span>            <span class="n">minimize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="linenos"> 225</span>        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KRuleLike</span><span class="p">:</span>
<span class="linenos"> 226</span>            <span class="k">def</span><span class="w"> </span><span class="nf">is_ceil_condition</span><span class="p">(</span><span class="n">kast</span><span class="p">:</span> <span class="n">KInner</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 227</span>                <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">kast</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KApply</span> <span class="ow">and</span> <span class="n">kast</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;#Ceil&#39;</span>
<span class="linenos"> 228</span>
<span class="linenos"> 229</span>            <span class="k">def</span><span class="w"> </span><span class="nf">_simplify_config</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">KInner</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KInner</span><span class="p">:</span>
<span class="linenos"> 230</span>                <span class="k">return</span> <span class="n">sort_ac_collections</span><span class="p">(</span><span class="n">inline_cell_maps</span><span class="p">(</span><span class="n">config</span><span class="p">))</span>
<span class="linenos"> 231</span>
<span class="linenos"> 232</span>            <span class="n">sentence_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">-TO-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="linenos"> 233</span>            <span class="n">init_constraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">constraints</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_ceil_condition</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span>
<span class="linenos"> 234</span>            <span class="n">init_cterm</span> <span class="o">=</span> <span class="n">CTerm</span><span class="p">(</span><span class="n">_simplify_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">config</span><span class="p">),</span> <span class="n">init_constraints</span><span class="p">)</span>
<span class="linenos"> 235</span>            <span class="n">target_constraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">constraints</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">is_ceil_condition</span><span class="p">(</span><span class="n">c</span><span class="p">)]</span>
<span class="linenos"> 236</span>            <span class="n">target_cterm</span> <span class="o">=</span> <span class="n">CTerm</span><span class="p">(</span><span class="n">_simplify_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">config</span><span class="p">),</span> <span class="n">target_constraints</span><span class="p">)</span>
<span class="linenos"> 237</span>            <span class="n">rule</span><span class="p">:</span> <span class="n">KRuleLike</span>
<span class="linenos"> 238</span>            <span class="k">if</span> <span class="n">claim</span><span class="p">:</span>
<span class="linenos"> 239</span>                <span class="n">rule</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">cterm_build_claim</span><span class="p">(</span><span class="n">sentence_id</span><span class="p">,</span> <span class="n">init_cterm</span><span class="p">,</span> <span class="n">target_cterm</span><span class="p">)</span>
<span class="linenos"> 240</span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 241</span>                <span class="n">rule</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">cterm_build_rule</span><span class="p">(</span>
<span class="linenos"> 242</span>                    <span class="n">sentence_id</span><span class="p">,</span> <span class="n">init_cterm</span><span class="p">,</span> <span class="n">target_cterm</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span> <span class="n">defunc_with</span><span class="o">=</span><span class="n">defunc_with</span>
<span class="linenos"> 243</span>                <span class="p">)</span>
<span class="linenos"> 244</span>            <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
<span class="linenos"> 245</span>                <span class="n">rule</span> <span class="o">=</span> <span class="n">minimize_rule_like</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
<span class="linenos"> 246</span>            <span class="k">return</span> <span class="n">rule</span></div>

<span class="linenos"> 247</span>
<div class="viewcode-block" id="KCFG.Edge.replace_source">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Edge.replace_source">[docs]</a>
<span class="linenos"> 248</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 249</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 250</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span></div>

<span class="linenos"> 251</span>
<div class="viewcode-block" id="KCFG.Edge.replace_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Edge.replace_target">[docs]</a>
<span class="linenos"> 252</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 253</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 254</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span></div>
</div>

<span class="linenos"> 255</span>
<div class="viewcode-block" id="KCFG.MergedEdge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MergedEdge">[docs]</a>
<span class="linenos"> 256</span>    <span class="nd">@final</span>
<span class="linenos"> 257</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 258</span>    <span class="k">class</span><span class="w"> </span><span class="nc">MergedEdge</span><span class="p">(</span><span class="n">EdgeLike</span><span class="p">):</span>
<span class="linenos"> 259</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Merged edge is a collection of edges that have been merged into a single edge.&quot;&quot;&quot;</span>
<span class="linenos"> 260</span>
<span class="linenos"> 261</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 262</span>        <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 263</span>        <span class="n">edges</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos"> 264</span>
<div class="viewcode-block" id="KCFG.MergedEdge.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MergedEdge.to_dict">[docs]</a>
<span class="linenos"> 265</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 266</span>            <span class="k">return</span> <span class="p">{</span>
<span class="linenos"> 267</span>                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 268</span>                <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 269</span>                <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">edge</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">],</span>
<span class="linenos"> 270</span>            <span class="p">}</span></div>

<span class="linenos"> 271</span>
<div class="viewcode-block" id="KCFG.MergedEdge.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MergedEdge.from_dict">[docs]</a>
<span class="linenos"> 272</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 273</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">:</span>
<span class="linenos"> 274</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">(</span>
<span class="linenos"> 275</span>                <span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]],</span>
<span class="linenos"> 276</span>                <span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span>
<span class="linenos"> 277</span>                <span class="nb">tuple</span><span class="p">(</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span> <span class="n">nodes</span><span class="p">)</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;edges&#39;</span><span class="p">]),</span>
<span class="linenos"> 278</span>            <span class="p">)</span></div>

<span class="linenos"> 279</span>
<div class="viewcode-block" id="KCFG.MergedEdge.replace_source">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MergedEdge.replace_source">[docs]</a>
<span class="linenos"> 280</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">:</span>
<span class="linenos"> 281</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 282</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span></div>

<span class="linenos"> 283</span>
<div class="viewcode-block" id="KCFG.MergedEdge.replace_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MergedEdge.replace_target">[docs]</a>
<span class="linenos"> 284</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">:</span>
<span class="linenos"> 285</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 286</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span></div>

<span class="linenos"> 287</span>
<div class="viewcode-block" id="KCFG.MergedEdge.to_rule">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MergedEdge.to_rule">[docs]</a>
<span class="linenos"> 288</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">claim</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KRuleLike</span><span class="p">:</span>
<span class="linenos"> 289</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">())</span><span class="o">.</span><span class="n">to_rule</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">claim</span><span class="p">,</span> <span class="n">priority</span><span class="p">)</span></div>
</div>

<span class="linenos"> 290</span>
<div class="viewcode-block" id="KCFG.Cover">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Cover">[docs]</a>
<span class="linenos"> 291</span>    <span class="nd">@final</span>
<span class="linenos"> 292</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 293</span>    <span class="k">class</span><span class="w"> </span><span class="nc">Cover</span><span class="p">(</span><span class="n">EdgeLike</span><span class="p">):</span>
<span class="linenos"> 294</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 295</span>        <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 296</span>        <span class="n">csubst</span><span class="p">:</span> <span class="n">CSubst</span>
<span class="linenos"> 297</span>
<div class="viewcode-block" id="KCFG.Cover.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Cover.to_dict">[docs]</a>
<span class="linenos"> 298</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 299</span>            <span class="k">return</span> <span class="p">{</span>
<span class="linenos"> 300</span>                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 301</span>                <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 302</span>                <span class="s1">&#39;csubst&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">csubst</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
<span class="linenos"> 303</span>            <span class="p">}</span></div>

<span class="linenos"> 304</span>
<div class="viewcode-block" id="KCFG.Cover.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Cover.from_dict">[docs]</a>
<span class="linenos"> 305</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 306</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 307</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]],</span> <span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span> <span class="n">CSubst</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;csubst&#39;</span><span class="p">]))</span></div>

<span class="linenos"> 308</span>
<div class="viewcode-block" id="KCFG.Cover.replace_source">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Cover.replace_source">[docs]</a>
<span class="linenos"> 309</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 310</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 311</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">csubst</span><span class="p">)</span></div>

<span class="linenos"> 312</span>
<div class="viewcode-block" id="KCFG.Cover.replace_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Cover.replace_target">[docs]</a>
<span class="linenos"> 313</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 314</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 315</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">csubst</span><span class="p">)</span></div>
</div>

<span class="linenos"> 316</span>
<div class="viewcode-block" id="KCFG.MultiEdge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MultiEdge">[docs]</a>
<span class="linenos"> 317</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 318</span>    <span class="k">class</span><span class="w"> </span><span class="nc">MultiEdge</span><span class="p">(</span><span class="n">Successor</span><span class="p">):</span>
<span class="linenos"> 319</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 320</span>
<span class="linenos"> 321</span>        <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 322</span>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 323</span>                <span class="k">return</span> <span class="bp">NotImplemented</span>
<span class="linenos"> 324</span>            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_ids</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">target_ids</span><span class="p">)</span>
<span class="linenos"> 325</span>
<div class="viewcode-block" id="KCFG.MultiEdge.with_single_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.MultiEdge.with_single_target">[docs]</a>
<span class="linenos"> 326</span>        <span class="nd">@abstractmethod</span>
<span class="linenos"> 327</span>        <span class="k">def</span><span class="w"> </span><span class="nf">with_single_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MultiEdge</span><span class="p">:</span> <span class="o">...</span></div>
</div>

<span class="linenos"> 328</span>
<div class="viewcode-block" id="KCFG.Split">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Split">[docs]</a>
<span class="linenos"> 329</span>    <span class="nd">@final</span>
<span class="linenos"> 330</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 331</span>    <span class="k">class</span><span class="w"> </span><span class="nc">Split</span><span class="p">(</span><span class="n">MultiEdge</span><span class="p">):</span>
<span class="linenos"> 332</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 333</span>        <span class="n">_targets</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="n">CSubst</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos"> 334</span>
<span class="linenos"> 335</span>        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="n">_targets</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="n">CSubst</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 336</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
<span class="linenos"> 337</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_targets&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_targets</span><span class="p">))</span>
<span class="linenos"> 338</span>
<span class="linenos"> 339</span>        <span class="nd">@property</span>
<span class="linenos"> 340</span>        <span class="k">def</span><span class="w"> </span><span class="nf">targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="linenos"> 341</span>            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">target</span> <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">)</span>
<span class="linenos"> 342</span>
<span class="linenos"> 343</span>        <span class="nd">@property</span>
<span class="linenos"> 344</span>        <span class="k">def</span><span class="w"> </span><span class="nf">splits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">CSubst</span><span class="p">]:</span>
<span class="linenos"> 345</span>            <span class="k">return</span> <span class="p">{</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">csubst</span> <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">csubst</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">}</span>
<span class="linenos"> 346</span>
<div class="viewcode-block" id="KCFG.Split.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Split.to_dict">[docs]</a>
<span class="linenos"> 347</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 348</span>            <span class="k">return</span> <span class="p">{</span>
<span class="linenos"> 349</span>                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 350</span>                <span class="s1">&#39;targets&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 351</span>                    <span class="p">{</span>
<span class="linenos"> 352</span>                        <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 353</span>                        <span class="s1">&#39;csubst&#39;</span><span class="p">:</span> <span class="n">csubst</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span>
<span class="linenos"> 354</span>                    <span class="p">}</span>
<span class="linenos"> 355</span>                    <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">csubst</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span>
<span class="linenos"> 356</span>                <span class="p">],</span>
<span class="linenos"> 357</span>            <span class="p">}</span></div>

<span class="linenos"> 358</span>
<div class="viewcode-block" id="KCFG.Split.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Split.from_dict">[docs]</a>
<span class="linenos"> 359</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 360</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 361</span>            <span class="n">_targets</span> <span class="o">=</span> <span class="p">[(</span><span class="n">nodes</span><span class="p">[</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span> <span class="n">CSubst</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;csubst&#39;</span><span class="p">]))</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;targets&#39;</span><span class="p">]]</span>
<span class="linenos"> 362</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]],</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_targets</span><span class="p">))</span></div>

<span class="linenos"> 363</span>
<div class="viewcode-block" id="KCFG.Split.with_single_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Split.with_single_target">[docs]</a>
<span class="linenos"> 364</span>        <span class="k">def</span><span class="w"> </span><span class="nf">with_single_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 365</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="p">((</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">[</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">]),))</span></div>

<span class="linenos"> 366</span>
<span class="linenos"> 367</span>        <span class="nd">@property</span>
<span class="linenos"> 368</span>        <span class="k">def</span><span class="w"> </span><span class="nf">covers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="linenos"> 369</span>            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">csubst</span><span class="p">)</span> <span class="k">for</span> <span class="n">target</span><span class="p">,</span> <span class="n">csubst</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">)</span>
<span class="linenos"> 370</span>
<div class="viewcode-block" id="KCFG.Split.replace_source">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Split.replace_source">[docs]</a>
<span class="linenos"> 371</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 372</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 373</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">)</span></div>

<span class="linenos"> 374</span>
<div class="viewcode-block" id="KCFG.Split.replace_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.Split.replace_target">[docs]</a>
<span class="linenos"> 375</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 376</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_ids</span>
<span class="linenos"> 377</span>            <span class="n">new_targets</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos"> 378</span>                <span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">csubst</span><span class="p">)</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_node</span><span class="o">.</span><span class="n">id</span> <span class="k">else</span> <span class="p">(</span><span class="n">target_node</span><span class="p">,</span> <span class="n">csubst</span><span class="p">)</span>
<span class="linenos"> 379</span>                <span class="k">for</span> <span class="n">target_node</span><span class="p">,</span> <span class="n">csubst</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span>
<span class="linenos"> 380</span>            <span class="p">]</span>
<span class="linenos"> 381</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_targets</span><span class="p">))</span></div>
</div>

<span class="linenos"> 382</span>
<div class="viewcode-block" id="KCFG.NDBranch">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.NDBranch">[docs]</a>
<span class="linenos"> 383</span>    <span class="nd">@final</span>
<span class="linenos"> 384</span>    <span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 385</span>    <span class="k">class</span><span class="w"> </span><span class="nc">NDBranch</span><span class="p">(</span><span class="n">MultiEdge</span><span class="p">):</span>
<span class="linenos"> 386</span>        <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span>
<span class="linenos"> 387</span>        <span class="n">_targets</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos"> 388</span>        <span class="n">rules</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos"> 389</span>
<span class="linenos"> 390</span>        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="n">_targets</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">],</span> <span class="n">rules</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 391</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
<span class="linenos"> 392</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_targets&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_targets</span><span class="p">))</span>
<span class="linenos"> 393</span>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;rules&#39;</span><span class="p">,</span> <span class="n">rules</span><span class="p">)</span>
<span class="linenos"> 394</span>
<span class="linenos"> 395</span>        <span class="nd">@property</span>
<span class="linenos"> 396</span>        <span class="k">def</span><span class="w"> </span><span class="nf">targets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="linenos"> 397</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span>
<span class="linenos"> 398</span>
<div class="viewcode-block" id="KCFG.NDBranch.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.NDBranch.to_dict">[docs]</a>
<span class="linenos"> 399</span>        <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 400</span>            <span class="k">return</span> <span class="p">{</span>
<span class="linenos"> 401</span>                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="linenos"> 402</span>                <span class="s1">&#39;targets&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">],</span>
<span class="linenos"> 403</span>                <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">),</span>
<span class="linenos"> 404</span>            <span class="p">}</span></div>

<span class="linenos"> 405</span>
<div class="viewcode-block" id="KCFG.NDBranch.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.NDBranch.from_dict">[docs]</a>
<span class="linenos"> 406</span>        <span class="nd">@staticmethod</span>
<span class="linenos"> 407</span>        <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 408</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">(</span>
<span class="linenos"> 409</span>                <span class="n">nodes</span><span class="p">[</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]],</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">nodes</span><span class="p">[</span><span class="n">target</span><span class="p">]</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;targets&#39;</span><span class="p">]]),</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">dct</span><span class="p">[</span><span class="s1">&#39;rules&#39;</span><span class="p">])</span>
<span class="linenos"> 410</span>            <span class="p">)</span></div>

<span class="linenos"> 411</span>
<div class="viewcode-block" id="KCFG.NDBranch.with_single_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.NDBranch.with_single_target">[docs]</a>
<span class="linenos"> 412</span>        <span class="k">def</span><span class="w"> </span><span class="nf">with_single_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 413</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="p">(</span><span class="n">target</span><span class="p">,),</span> <span class="p">())</span></div>

<span class="linenos"> 414</span>
<span class="linenos"> 415</span>        <span class="nd">@property</span>
<span class="linenos"> 416</span>        <span class="k">def</span><span class="w"> </span><span class="nf">edges</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="linenos"> 417</span>            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">())</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">)</span>
<span class="linenos"> 418</span>
<div class="viewcode-block" id="KCFG.NDBranch.replace_source">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.NDBranch.replace_source">[docs]</a>
<span class="linenos"> 419</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 420</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 421</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span></div>

<span class="linenos"> 422</span>
<div class="viewcode-block" id="KCFG.NDBranch.replace_target">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.NDBranch.replace_target">[docs]</a>
<span class="linenos"> 423</span>        <span class="k">def</span><span class="w"> </span><span class="nf">replace_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 424</span>            <span class="k">assert</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_ids</span>
<span class="linenos"> 425</span>            <span class="n">new_targets</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_node</span><span class="o">.</span><span class="n">id</span> <span class="k">else</span> <span class="n">target_node</span> <span class="k">for</span> <span class="n">target_node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_targets</span><span class="p">]</span>
<span class="linenos"> 426</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_targets</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span></div>
</div>

<span class="linenos"> 427</span>
<span class="linenos"> 428</span>    <span class="n">_node_id</span><span class="p">:</span> <span class="nb">int</span>
<span class="linenos"> 429</span>    <span class="n">_nodes</span><span class="p">:</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]</span>
<span class="linenos"> 430</span>
<span class="linenos"> 431</span>    <span class="n">_created_nodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="linenos"> 432</span>    <span class="n">_deleted_nodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="linenos"> 433</span>
<span class="linenos"> 434</span>    <span class="n">_edges</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Edge</span><span class="p">]</span>
<span class="linenos"> 435</span>    <span class="n">_merged_edges</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">MergedEdge</span><span class="p">]</span>
<span class="linenos"> 436</span>    <span class="n">_covers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Cover</span><span class="p">]</span>
<span class="linenos"> 437</span>    <span class="n">_splits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Split</span><span class="p">]</span>
<span class="linenos"> 438</span>    <span class="n">_ndbranches</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">NDBranch</span><span class="p">]</span>
<span class="linenos"> 439</span>    <span class="n">_aliases</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="linenos"> 440</span>    <span class="n">_lock</span><span class="p">:</span> <span class="n">RLock</span>
<span class="linenos"> 441</span>
<span class="linenos"> 442</span>    <span class="n">_kcfg_store</span><span class="p">:</span> <span class="n">KCFGStore</span> <span class="o">|</span> <span class="kc">None</span>
<span class="linenos"> 443</span>
<span class="linenos"> 444</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">optimize_memory</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 445</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_node_id</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 446</span>        <span class="k">if</span> <span class="n">optimize_memory</span><span class="p">:</span>
<span class="linenos"> 447</span>            <span class="kn">from</span><span class="w"> </span><span class="nn">.store</span><span class="w"> </span><span class="kn">import</span> <span class="n">OptimizedNodeStore</span>
<span class="linenos"> 448</span>
<span class="linenos"> 449</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span> <span class="o">=</span> <span class="n">OptimizedNodeStore</span><span class="p">()</span>
<span class="linenos"> 450</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 451</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 452</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="linenos"> 453</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_deleted_nodes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="linenos"> 454</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 455</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 456</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 457</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 458</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 459</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span> <span class="o">=</span> <span class="p">{}</span>
<span class="linenos"> 460</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">RLock</span><span class="p">()</span>
<span class="linenos"> 461</span>        <span class="k">if</span> <span class="n">cfg_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 462</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_kcfg_store</span> <span class="o">=</span> <span class="n">KCFGStore</span><span class="p">(</span><span class="n">cfg_dir</span><span class="p">)</span>
<span class="linenos"> 463</span>
<span class="linenos"> 464</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 465</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 466</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_node</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 467</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 468</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_edge</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 469</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">:</span>
<span class="linenos"> 470</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_merged_edge</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 471</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 472</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_cover</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 473</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 474</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_split</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 475</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 476</span>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">contains_ndbranch</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos"> 477</span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos"> 478</span>
<span class="linenos"> 479</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="p">:</span>
<span class="linenos"> 480</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
<span class="linenos"> 481</span>        <span class="k">return</span> <span class="bp">self</span>
<span class="linenos"> 482</span>
<span class="linenos"> 483</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span>
<span class="linenos"> 484</span>        <span class="bp">self</span><span class="p">,</span>
<span class="linenos"> 485</span>        <span class="n">exc_type</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="ne">BaseException</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 486</span>        <span class="n">exc_value</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 487</span>        <span class="n">traceback</span><span class="p">:</span> <span class="n">TracebackType</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 488</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 489</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
<span class="linenos"> 490</span>        <span class="k">if</span> <span class="n">exc_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 491</span>            <span class="k">return</span> <span class="kc">True</span>
<span class="linenos"> 492</span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos"> 493</span>
<span class="linenos"> 494</span>    <span class="nd">@property</span>
<span class="linenos"> 495</span>    <span class="k">def</span><span class="w"> </span><span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 496</span>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="linenos"> 497</span>
<span class="linenos"> 498</span>    <span class="nd">@property</span>
<span class="linenos"> 499</span>    <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 500</span>        <span class="k">return</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_root</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
<span class="linenos"> 501</span>
<span class="linenos"> 502</span>    <span class="nd">@property</span>
<span class="linenos"> 503</span>    <span class="k">def</span><span class="w"> </span><span class="nf">vacuous</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 504</span>        <span class="k">return</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_vacuous</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
<span class="linenos"> 505</span>
<span class="linenos"> 506</span>    <span class="nd">@property</span>
<span class="linenos"> 507</span>    <span class="k">def</span><span class="w"> </span><span class="nf">stuck</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 508</span>        <span class="k">return</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stuck</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
<span class="linenos"> 509</span>
<span class="linenos"> 510</span>    <span class="nd">@property</span>
<span class="linenos"> 511</span>    <span class="k">def</span><span class="w"> </span><span class="nf">leaves</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 512</span>        <span class="k">return</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_leaf</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
<span class="linenos"> 513</span>
<span class="linenos"> 514</span>    <span class="nd">@property</span>
<span class="linenos"> 515</span>    <span class="k">def</span><span class="w"> </span><span class="nf">covered</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 516</span>        <span class="k">return</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_covered</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
<span class="linenos"> 517</span>
<span class="linenos"> 518</span>    <span class="nd">@property</span>
<span class="linenos"> 519</span>    <span class="k">def</span><span class="w"> </span><span class="nf">uncovered</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos"> 520</span>        <span class="k">return</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_covered</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
<span class="linenos"> 521</span>
<div class="viewcode-block" id="KCFG.from_claim">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.from_claim">[docs]</a>
<span class="linenos"> 522</span>    <span class="nd">@staticmethod</span>
<span class="linenos"> 523</span>    <span class="k">def</span><span class="w"> </span><span class="nf">from_claim</span><span class="p">(</span>
<span class="linenos"> 524</span>        <span class="n">defn</span><span class="p">:</span> <span class="n">KDefinition</span><span class="p">,</span> <span class="n">claim</span><span class="p">:</span> <span class="n">KClaim</span><span class="p">,</span> <span class="n">cfg_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">optimize_memory</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="linenos"> 525</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="p">,</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">NodeIdLike</span><span class="p">]:</span>
<span class="linenos"> 526</span>        <span class="n">cfg</span> <span class="o">=</span> <span class="n">KCFG</span><span class="p">(</span><span class="n">cfg_dir</span><span class="o">=</span><span class="n">cfg_dir</span><span class="p">,</span> <span class="n">optimize_memory</span><span class="o">=</span><span class="n">optimize_memory</span><span class="p">)</span>
<span class="linenos"> 527</span>        <span class="n">claim_body</span> <span class="o">=</span> <span class="n">claim</span><span class="o">.</span><span class="n">body</span>
<span class="linenos"> 528</span>        <span class="n">claim_body</span> <span class="o">=</span> <span class="n">defn</span><span class="o">.</span><span class="n">instantiate_cell_vars</span><span class="p">(</span><span class="n">claim_body</span><span class="p">)</span>
<span class="linenos"> 529</span>        <span class="n">claim_body</span> <span class="o">=</span> <span class="n">rename_generated_vars</span><span class="p">(</span><span class="n">claim_body</span><span class="p">)</span>
<span class="linenos"> 530</span>
<span class="linenos"> 531</span>        <span class="n">claim_lhs</span> <span class="o">=</span> <span class="n">CTerm</span><span class="o">.</span><span class="n">from_kast</span><span class="p">(</span><span class="n">extract_lhs</span><span class="p">(</span><span class="n">claim_body</span><span class="p">))</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">bool_to_ml_pred</span><span class="p">(</span><span class="n">claim</span><span class="o">.</span><span class="n">requires</span><span class="p">))</span>
<span class="linenos"> 532</span>        <span class="n">init_node</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="n">claim_lhs</span><span class="p">)</span>
<span class="linenos"> 533</span>
<span class="linenos"> 534</span>        <span class="n">claim_rhs</span> <span class="o">=</span> <span class="n">CTerm</span><span class="o">.</span><span class="n">from_kast</span><span class="p">(</span><span class="n">extract_rhs</span><span class="p">(</span><span class="n">claim_body</span><span class="p">))</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span>
<span class="linenos"> 535</span>            <span class="n">bool_to_ml_pred</span><span class="p">(</span><span class="n">andBool</span><span class="p">([</span><span class="n">claim</span><span class="o">.</span><span class="n">requires</span><span class="p">,</span> <span class="n">claim</span><span class="o">.</span><span class="n">ensures</span><span class="p">]))</span>
<span class="linenos"> 536</span>        <span class="p">)</span>
<span class="linenos"> 537</span>        <span class="n">target_node</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="n">claim_rhs</span><span class="p">)</span>
<span class="linenos"> 538</span>
<span class="linenos"> 539</span>        <span class="k">return</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">init_node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">target_node</span><span class="o">.</span><span class="n">id</span></div>

<span class="linenos"> 540</span>
<div class="viewcode-block" id="KCFG.path_length">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.path_length">[docs]</a>
<span class="linenos"> 541</span>    <span class="nd">@staticmethod</span>
<span class="linenos"> 542</span>    <span class="k">def</span><span class="w"> </span><span class="nf">path_length</span><span class="p">(</span><span class="n">_path</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos"> 543</span>        <span class="n">_path</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_path</span><span class="p">)</span>
<span class="linenos"> 544</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos"> 545</span>            <span class="k">return</span> <span class="mi">0</span>
<span class="linenos"> 546</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 547</span>            <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="linenos"> 548</span>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 549</span>            <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="linenos"> 550</span>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 551</span>            <span class="k">return</span> <span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">depth</span> <span class="o">+</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="linenos"> 552</span>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">:</span>
<span class="linenos"> 553</span>            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">depth</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span> <span class="o">+</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>  <span class="c1"># todo: check this</span>
<span class="linenos"> 554</span>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot handle Successor type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

<span class="linenos"> 555</span>
<div class="viewcode-block" id="KCFG.extend">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.extend">[docs]</a>
<span class="linenos"> 556</span>    <span class="k">def</span><span class="w"> </span><span class="nf">extend</span><span class="p">(</span>
<span class="linenos"> 557</span>        <span class="bp">self</span><span class="p">,</span>
<span class="linenos"> 558</span>        <span class="n">extend_result</span><span class="p">:</span> <span class="n">KCFGExtendResult</span><span class="p">,</span>
<span class="linenos"> 559</span>        <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">,</span>
<span class="linenos"> 560</span>        <span class="n">logs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">,</span> <span class="o">...</span><span class="p">]],</span>
<span class="linenos"> 561</span>        <span class="o">*</span><span class="p">,</span>
<span class="linenos"> 562</span>        <span class="n">optimize_kcfg</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
<span class="linenos"> 563</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 564</span>
<span class="linenos"> 565</span>        <span class="k">def</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">warning</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 566</span>            <span class="n">result_info</span> <span class="o">=</span> <span class="n">extend_result</span><span class="o">.</span><span class="n">info</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">extend_result</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Step</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">extend_result</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Branch</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
<span class="linenos"> 567</span>            <span class="n">result_info_message</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;: </span><span class="si">{</span><span class="n">result_info</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">result_info</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
<span class="linenos"> 568</span>            <span class="n">_LOGGER</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
<span class="linenos"> 569</span>                <span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span> <span class="k">if</span> <span class="n">warning</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
<span class="linenos"> 570</span>                <span class="sa">f</span><span class="s1">&#39;Extending KCFG with: </span><span class="si">{</span><span class="n">message</span><span class="si">}{</span><span class="n">result_info_message</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
<span class="linenos"> 571</span>            <span class="p">)</span>
<span class="linenos"> 572</span>
<span class="linenos"> 573</span>        <span class="k">match</span> <span class="n">extend_result</span><span class="p">:</span>
<span class="linenos"> 574</span>            <span class="k">case</span> <span class="n">Vacuous</span><span class="p">():</span>
<span class="linenos"> 575</span>                <span class="bp">self</span><span class="o">.</span><span class="n">add_vacuous</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 576</span>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;vacuous node: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">warning</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 577</span>
<span class="linenos"> 578</span>            <span class="k">case</span> <span class="n">Stuck</span><span class="p">():</span>
<span class="linenos"> 579</span>                <span class="bp">self</span><span class="o">.</span><span class="n">add_stuck</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 580</span>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;stuck node: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 581</span>
<span class="linenos"> 582</span>            <span class="k">case</span> <span class="n">Abstract</span><span class="p">(</span><span class="n">cterm</span><span class="p">):</span>
<span class="linenos"> 583</span>                <span class="n">new_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="n">cterm</span><span class="p">)</span>
<span class="linenos"> 584</span>                <span class="bp">self</span><span class="o">.</span><span class="n">create_cover</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">new_node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 585</span>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;abstraction node: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 586</span>
<span class="linenos"> 587</span>            <span class="k">case</span> <span class="n">Step</span><span class="p">(</span><span class="n">cterm</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">next_node_logs</span><span class="p">,</span> <span class="n">rule_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
<span class="linenos"> 588</span>                <span class="n">node_id</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 589</span>                <span class="n">next_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="n">cterm</span><span class="p">)</span>
<span class="linenos"> 590</span>                <span class="c1"># Optimization for steps consists of on-the-fly merging of consecutive edges and can</span>
<span class="linenos"> 591</span>                <span class="c1"># be performed only if the current node has a single predecessor connected by an Edge</span>
<span class="linenos"> 592</span>                <span class="k">if</span> <span class="p">(</span>
<span class="linenos"> 593</span>                    <span class="n">optimize_kcfg</span>
<span class="linenos"> 594</span>                    <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">predecessors</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 595</span>                    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_edge</span> <span class="o">:=</span> <span class="n">predecessors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">)</span>
<span class="linenos"> 596</span>                <span class="p">):</span>
<span class="linenos"> 597</span>                    <span class="c1"># The existing edge is removed and the step parameters are updated accordingly</span>
<span class="linenos"> 598</span>                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">in_edge</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 599</span>                    <span class="n">node_id</span> <span class="o">=</span> <span class="n">in_edge</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span>
<span class="linenos"> 600</span>                    <span class="n">depth</span> <span class="o">+=</span> <span class="n">in_edge</span><span class="o">.</span><span class="n">depth</span>
<span class="linenos"> 601</span>                    <span class="n">rule_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">in_edge</span><span class="o">.</span><span class="n">rules</span><span class="p">)</span> <span class="o">+</span> <span class="n">rule_labels</span>
<span class="linenos"> 602</span>                    <span class="n">next_node_logs</span> <span class="o">=</span> <span class="n">logs</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">+</span> <span class="n">next_node_logs</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">logs</span> <span class="k">else</span> <span class="n">next_node_logs</span>
<span class="linenos"> 603</span>                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_node</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 604</span>                <span class="bp">self</span><span class="o">.</span><span class="n">create_edge</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">next_node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">rule_labels</span><span class="p">)</span>
<span class="linenos"> 605</span>                <span class="n">logs</span><span class="p">[</span><span class="n">next_node</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_node_logs</span>
<span class="linenos"> 606</span>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;basic block at depth </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s1"> --&gt; </span><span class="si">{</span><span class="n">next_node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 607</span>
<span class="linenos"> 608</span>            <span class="k">case</span><span class="w"> </span><span class="n">Branch</span><span class="p">(</span><span class="n">branches</span><span class="p">,</span> <span class="k">_</span><span class="p">):</span>
<span class="linenos"> 609</span>                <span class="n">branch_node_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_on_constraints</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">branches</span><span class="p">)</span>
<span class="linenos"> 610</span>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">branches</span><span class="p">)</span><span class="si">}</span><span class="s1"> branches: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> --&gt; </span><span class="si">{</span><span class="n">branch_node_ids</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 611</span>
<span class="linenos"> 612</span>            <span class="k">case</span> <span class="n">NDBranch</span><span class="p">(</span><span class="n">cterms</span><span class="p">,</span> <span class="n">next_node_logs</span><span class="p">,</span> <span class="n">rule_labels</span><span class="p">):</span>
<span class="linenos"> 613</span>                <span class="n">next_ids</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="n">cterm</span><span class="p">)</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">cterm</span> <span class="ow">in</span> <span class="n">cterms</span><span class="p">]</span>
<span class="linenos"> 614</span>                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">next_ids</span><span class="p">:</span>
<span class="linenos"> 615</span>                    <span class="n">logs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_node_logs</span>
<span class="linenos"> 616</span>                <span class="bp">self</span><span class="o">.</span><span class="n">create_ndbranch</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">next_ids</span><span class="p">,</span> <span class="n">rules</span><span class="o">=</span><span class="n">rule_labels</span><span class="p">)</span>
<span class="linenos"> 617</span>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cterms</span><span class="p">)</span><span class="si">}</span><span class="s1"> non-deterministic branches: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> --&gt; </span><span class="si">{</span><span class="n">next_ids</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 618</span>
<span class="linenos"> 619</span>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<span class="linenos"> 620</span>                <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">()</span></div>

<span class="linenos"> 621</span>
<div class="viewcode-block" id="KCFG.to_dict_no_nodes">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.to_dict_no_nodes">[docs]</a>
<span class="linenos"> 622</span>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict_no_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 623</span>        <span class="n">nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="linenos"> 624</span>        <span class="n">edges</span> <span class="o">=</span> <span class="p">[</span><span class="n">edge</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">()]</span>
<span class="linenos"> 625</span>        <span class="n">merged_edges</span> <span class="o">=</span> <span class="p">[</span><span class="n">merged_edge</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">merged_edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">()]</span>
<span class="linenos"> 626</span>        <span class="n">covers</span> <span class="o">=</span> <span class="p">[</span><span class="n">cover</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">cover</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">covers</span><span class="p">()]</span>
<span class="linenos"> 627</span>        <span class="n">splits</span> <span class="o">=</span> <span class="p">[</span><span class="n">split</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">()]</span>
<span class="linenos"> 628</span>        <span class="n">ndbranches</span> <span class="o">=</span> <span class="p">[</span><span class="n">ndbranch</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">ndbranch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndbranches</span><span class="p">()]</span>
<span class="linenos"> 629</span>
<span class="linenos"> 630</span>        <span class="n">aliases</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
<span class="linenos"> 631</span>
<span class="linenos"> 632</span>        <span class="n">res</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 633</span>            <span class="s1">&#39;next&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_id</span><span class="p">,</span>
<span class="linenos"> 634</span>            <span class="s1">&#39;nodes&#39;</span><span class="p">:</span> <span class="n">nodes</span><span class="p">,</span>
<span class="linenos"> 635</span>            <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="n">edges</span><span class="p">,</span>
<span class="linenos"> 636</span>            <span class="s1">&#39;merged_edges&#39;</span><span class="p">:</span> <span class="n">merged_edges</span><span class="p">,</span>
<span class="linenos"> 637</span>            <span class="s1">&#39;covers&#39;</span><span class="p">:</span> <span class="n">covers</span><span class="p">,</span>
<span class="linenos"> 638</span>            <span class="s1">&#39;splits&#39;</span><span class="p">:</span> <span class="n">splits</span><span class="p">,</span>
<span class="linenos"> 639</span>            <span class="s1">&#39;ndbranches&#39;</span><span class="p">:</span> <span class="n">ndbranches</span><span class="p">,</span>
<span class="linenos"> 640</span>            <span class="s1">&#39;aliases&#39;</span><span class="p">:</span> <span class="n">aliases</span><span class="p">,</span>
<span class="linenos"> 641</span>        <span class="p">}</span>
<span class="linenos"> 642</span>        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">}</span></div>

<span class="linenos"> 643</span>
<div class="viewcode-block" id="KCFG.to_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.to_dict">[docs]</a>
<span class="linenos"> 644</span>    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="linenos"> 645</span>        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">]</span>
<span class="linenos"> 646</span>        <span class="n">edges</span> <span class="o">=</span> <span class="p">[</span><span class="n">edge</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">()]</span>
<span class="linenos"> 647</span>        <span class="n">merged_edges</span> <span class="o">=</span> <span class="p">[</span><span class="n">merged_edge</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">merged_edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">()]</span>
<span class="linenos"> 648</span>        <span class="n">covers</span> <span class="o">=</span> <span class="p">[</span><span class="n">cover</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">cover</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">covers</span><span class="p">()]</span>
<span class="linenos"> 649</span>        <span class="n">splits</span> <span class="o">=</span> <span class="p">[</span><span class="n">split</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">()]</span>
<span class="linenos"> 650</span>        <span class="n">ndbranches</span> <span class="o">=</span> <span class="p">[</span><span class="n">ndbranch</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">ndbranch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndbranches</span><span class="p">()]</span>
<span class="linenos"> 651</span>
<span class="linenos"> 652</span>        <span class="n">aliases</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
<span class="linenos"> 653</span>
<span class="linenos"> 654</span>        <span class="n">res</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 655</span>            <span class="s1">&#39;next&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_id</span><span class="p">,</span>
<span class="linenos"> 656</span>            <span class="s1">&#39;nodes&#39;</span><span class="p">:</span> <span class="n">nodes</span><span class="p">,</span>
<span class="linenos"> 657</span>            <span class="s1">&#39;edges&#39;</span><span class="p">:</span> <span class="n">edges</span><span class="p">,</span>
<span class="linenos"> 658</span>            <span class="s1">&#39;merged_edges&#39;</span><span class="p">:</span> <span class="n">merged_edges</span><span class="p">,</span>
<span class="linenos"> 659</span>            <span class="s1">&#39;covers&#39;</span><span class="p">:</span> <span class="n">covers</span><span class="p">,</span>
<span class="linenos"> 660</span>            <span class="s1">&#39;splits&#39;</span><span class="p">:</span> <span class="n">splits</span><span class="p">,</span>
<span class="linenos"> 661</span>            <span class="s1">&#39;ndbranches&#39;</span><span class="p">:</span> <span class="n">ndbranches</span><span class="p">,</span>
<span class="linenos"> 662</span>            <span class="s1">&#39;aliases&#39;</span><span class="p">:</span> <span class="n">aliases</span><span class="p">,</span>
<span class="linenos"> 663</span>        <span class="p">}</span>
<span class="linenos"> 664</span>        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">}</span></div>

<span class="linenos"> 665</span>
<div class="viewcode-block" id="KCFG.from_dict">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.from_dict">[docs]</a>
<span class="linenos"> 666</span>    <span class="nd">@staticmethod</span>
<span class="linenos"> 667</span>    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">dct</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">optimize_memory</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="p">:</span>
<span class="linenos"> 668</span>        <span class="n">cfg</span> <span class="o">=</span> <span class="n">KCFG</span><span class="p">(</span><span class="n">optimize_memory</span><span class="o">=</span><span class="n">optimize_memory</span><span class="p">)</span>
<span class="linenos"> 669</span>
<span class="linenos"> 670</span>        <span class="k">for</span> <span class="n">node_dict</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]:</span>
<span class="linenos"> 671</span>            <span class="n">node</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">node_dict</span><span class="p">)</span>
<span class="linenos"> 672</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="linenos"> 673</span>
<span class="linenos"> 674</span>        <span class="n">max_id</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">cfg</span><span class="o">.</span><span class="n">nodes</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 675</span>        <span class="n">cfg</span><span class="o">.</span><span class="n">_node_id</span> <span class="o">=</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;next&#39;</span><span class="p">,</span> <span class="n">max_id</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 676</span>
<span class="linenos"> 677</span>        <span class="k">for</span> <span class="n">edge_dict</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;edges&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]:</span>
<span class="linenos"> 678</span>            <span class="n">edge</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">edge_dict</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">)</span>
<span class="linenos"> 679</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
<span class="linenos"> 680</span>
<span class="linenos"> 681</span>        <span class="k">for</span> <span class="n">edge_dict</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;merged_edges&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]:</span>
<span class="linenos"> 682</span>            <span class="n">merged_edge</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">edge_dict</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">)</span>
<span class="linenos"> 683</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">merged_edge</span><span class="p">)</span>
<span class="linenos"> 684</span>
<span class="linenos"> 685</span>        <span class="k">for</span> <span class="n">cover_dict</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;covers&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]:</span>
<span class="linenos"> 686</span>            <span class="n">cover</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">cover_dict</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">)</span>
<span class="linenos"> 687</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">cover</span><span class="p">)</span>
<span class="linenos"> 688</span>
<span class="linenos"> 689</span>        <span class="k">for</span> <span class="n">split_dict</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;splits&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]:</span>
<span class="linenos"> 690</span>            <span class="n">split</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">split_dict</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">)</span>
<span class="linenos"> 691</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
<span class="linenos"> 692</span>
<span class="linenos"> 693</span>        <span class="k">for</span> <span class="n">ndbranch_dict</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ndbranches&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]:</span>
<span class="linenos"> 694</span>            <span class="n">ndbranch</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">ndbranch_dict</span><span class="p">,</span> <span class="n">cfg</span><span class="o">.</span><span class="n">_nodes</span><span class="p">)</span>
<span class="linenos"> 695</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">ndbranch</span><span class="p">)</span>
<span class="linenos"> 696</span>
<span class="linenos"> 697</span>        <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;aliases&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="linenos"> 698</span>            <span class="n">cfg</span><span class="o">.</span><span class="n">add_alias</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="n">alias</span><span class="p">,</span> <span class="n">node_id</span><span class="o">=</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 699</span>
<span class="linenos"> 700</span>        <span class="k">return</span> <span class="n">cfg</span></div>

<span class="linenos"> 701</span>
<div class="viewcode-block" id="KCFG.aliases">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.aliases">[docs]</a>
<span class="linenos"> 702</span>    <span class="k">def</span><span class="w"> </span><span class="nf">aliases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="linenos"> 703</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 704</span>        <span class="k">return</span> <span class="p">[</span><span class="n">alias</span> <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">node_id</span> <span class="o">==</span> <span class="n">value</span><span class="p">]</span></div>

<span class="linenos"> 705</span>
<div class="viewcode-block" id="KCFG.to_json">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.to_json">[docs]</a>
<span class="linenos"> 706</span>    <span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 707</span>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<span class="linenos"> 708</span>
<div class="viewcode-block" id="KCFG.from_json">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.from_json">[docs]</a>
<span class="linenos"> 709</span>    <span class="nd">@staticmethod</span>
<span class="linenos"> 710</span>    <span class="k">def</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">optimize_memory</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="p">:</span>
<span class="linenos"> 711</span>        <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">optimize_memory</span><span class="o">=</span><span class="n">optimize_memory</span><span class="p">)</span></div>

<span class="linenos"> 712</span>
<div class="viewcode-block" id="KCFG.to_rules">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.to_rules">[docs]</a>
<span class="linenos"> 713</span>    <span class="k">def</span><span class="w"> </span><span class="nf">to_rules</span><span class="p">(</span>
<span class="linenos"> 714</span>        <span class="bp">self</span><span class="p">,</span>
<span class="linenos"> 715</span>        <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 716</span>        <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="linenos"> 717</span>        <span class="n">defunc_with</span><span class="p">:</span> <span class="n">KDefinition</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 718</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">KRuleLike</span><span class="p">]:</span>
<span class="linenos"> 719</span>        <span class="n">_id</span> <span class="o">=</span> <span class="s1">&#39;BASIC-BLOCK&#39;</span> <span class="k">if</span> <span class="n">_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">_id</span>
<span class="linenos"> 720</span>        <span class="k">return</span> <span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">to_rule</span><span class="p">(</span><span class="n">_id</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span> <span class="n">defunc_with</span><span class="o">=</span><span class="n">defunc_with</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">()]</span> <span class="o">+</span> <span class="p">[</span>
<span class="linenos"> 721</span>            <span class="n">m</span><span class="o">.</span><span class="n">to_rule</span><span class="p">(</span><span class="n">_id</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">()</span>
<span class="linenos"> 722</span>        <span class="p">]</span></div>

<span class="linenos"> 723</span>
<div class="viewcode-block" id="KCFG.to_module">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.to_module">[docs]</a>
<span class="linenos"> 724</span>    <span class="k">def</span><span class="w"> </span><span class="nf">to_module</span><span class="p">(</span>
<span class="linenos"> 725</span>        <span class="bp">self</span><span class="p">,</span>
<span class="linenos"> 726</span>        <span class="n">module_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 727</span>        <span class="n">imports</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KImport</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
<span class="linenos"> 728</span>        <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="linenos"> 729</span>        <span class="n">att</span><span class="p">:</span> <span class="n">KAtt</span> <span class="o">=</span> <span class="n">EMPTY_ATT</span><span class="p">,</span>
<span class="linenos"> 730</span>        <span class="n">defunc_with</span><span class="p">:</span> <span class="n">KDefinition</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="linenos"> 731</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KFlatModule</span><span class="p">:</span>
<span class="linenos"> 732</span>        <span class="n">module_name</span> <span class="o">=</span> <span class="s1">&#39;KCFG&#39;</span> <span class="k">if</span> <span class="n">module_name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">module_name</span>
<span class="linenos"> 733</span>        <span class="k">return</span> <span class="n">KFlatModule</span><span class="p">(</span>
<span class="linenos"> 734</span>            <span class="n">module_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_rules</span><span class="p">(</span><span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span> <span class="n">defunc_with</span><span class="o">=</span><span class="n">defunc_with</span><span class="p">),</span> <span class="n">imports</span><span class="o">=</span><span class="n">imports</span><span class="p">,</span> <span class="n">att</span><span class="o">=</span><span class="n">att</span>
<span class="linenos"> 735</span>        <span class="p">)</span></div>

<span class="linenos"> 736</span>
<span class="linenos"> 737</span>    <span class="k">def</span><span class="w"> </span><span class="nf">_resolve_or_none</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_like</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 738</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">id_like</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos"> 739</span>            <span class="k">if</span> <span class="n">id_like</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">:</span>
<span class="linenos"> 740</span>                <span class="k">return</span> <span class="n">id_like</span>
<span class="linenos"> 741</span>
<span class="linenos"> 742</span>            <span class="k">return</span> <span class="kc">None</span>
<span class="linenos"> 743</span>
<span class="linenos"> 744</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">id_like</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">str</span><span class="p">:</span>
<span class="linenos"> 745</span>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Expected int or str for id_like, got: </span><span class="si">{</span><span class="n">id_like</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 746</span>
<span class="linenos"> 747</span>        <span class="k">if</span> <span class="n">id_like</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">):</span>
<span class="linenos"> 748</span>            <span class="k">if</span> <span class="n">id_like</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="p">:</span>
<span class="linenos"> 749</span>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="p">[</span><span class="n">id_like</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
<span class="linenos"> 750</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown alias: </span><span class="si">{</span><span class="n">id_like</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 751</span>
<span class="linenos"> 752</span>        <span class="k">return</span> <span class="kc">None</span>
<span class="linenos"> 753</span>
<span class="linenos"> 754</span>    <span class="k">def</span><span class="w"> </span><span class="nf">_resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_like</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="linenos"> 755</span>        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_or_none</span><span class="p">(</span><span class="n">id_like</span><span class="p">)</span>
<span class="linenos"> 756</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
<span class="linenos"> 757</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown node: </span><span class="si">{</span><span class="n">id_like</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 758</span>        <span class="k">return</span> <span class="n">match</span>
<span class="linenos"> 759</span>
<div class="viewcode-block" id="KCFG.node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.node">[docs]</a>
<span class="linenos"> 760</span>    <span class="k">def</span><span class="w"> </span><span class="nf">node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 761</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 762</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span></div>

<span class="linenos"> 763</span>
<div class="viewcode-block" id="KCFG.get_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.get_node">[docs]</a>
<span class="linenos"> 764</span>    <span class="k">def</span><span class="w"> </span><span class="nf">get_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 765</span>        <span class="n">resolved_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_or_none</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 766</span>        <span class="k">if</span> <span class="n">resolved_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 767</span>            <span class="k">return</span> <span class="kc">None</span>
<span class="linenos"> 768</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">resolved_id</span><span class="p">]</span></div>

<span class="linenos"> 769</span>
<div class="viewcode-block" id="KCFG.contains_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.contains_node">[docs]</a>
<span class="linenos"> 770</span>    <span class="k">def</span><span class="w"> </span><span class="nf">contains_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 771</span>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">))</span></div>

<span class="linenos"> 772</span>
<div class="viewcode-block" id="KCFG.add_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.add_node">[docs]</a>
<span class="linenos"> 773</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 774</span>        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">:</span>
<span class="linenos"> 775</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Node with id already exists: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 776</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
<span class="linenos"> 777</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<span class="linenos"> 778</span>
<div class="viewcode-block" id="KCFG.create_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_node">[docs]</a>
<span class="linenos"> 779</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos"> 780</span>        <span class="n">node</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_node_id</span><span class="p">,</span> <span class="n">cterm</span><span class="p">)</span>
<span class="linenos"> 781</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_node_id</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos"> 782</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
<span class="linenos"> 783</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 784</span>        <span class="k">return</span> <span class="n">node</span></div>

<span class="linenos"> 785</span>
<div class="viewcode-block" id="KCFG.remove_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_node">[docs]</a>
<span class="linenos"> 786</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 787</span>        <span class="bp">self</span><span class="o">.</span><span class="n">remove_edges_around</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 788</span>
<span class="linenos"> 789</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 790</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 791</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_deleted_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 792</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span></div>

<span class="linenos"> 793</span>
<div class="viewcode-block" id="KCFG.remove_edges_around">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_edges_around">[docs]</a>
<span class="linenos"> 794</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_edges_around</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 795</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 796</span>
<span class="linenos"> 797</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">s</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">node_id</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">target_ids</span><span class="p">}</span>
<span class="linenos"> 798</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 799</span>            <span class="n">k</span><span class="p">:</span> <span class="n">s</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">node_id</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">target_ids</span>
<span class="linenos"> 800</span>        <span class="p">}</span>
<span class="linenos"> 801</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">s</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">node_id</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">target_ids</span><span class="p">}</span>
<span class="linenos"> 802</span>
<span class="linenos"> 803</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">s</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">node_id</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">target_ids</span><span class="p">}</span>
<span class="linenos"> 804</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">b</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">node_id</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">target_ids</span><span class="p">}</span>
<span class="linenos"> 805</span>
<span class="linenos"> 806</span>        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="p">[</span><span class="n">alias</span> <span class="k">for</span> <span class="n">alias</span><span class="p">,</span> <span class="nb">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">id</span> <span class="o">==</span> <span class="n">node_id</span><span class="p">]:</span>
<span class="linenos"> 807</span>            <span class="bp">self</span><span class="o">.</span><span class="n">remove_alias</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span></div>

<span class="linenos"> 808</span>
<span class="linenos"> 809</span>    <span class="k">def</span><span class="w"> </span><span class="nf">_update_refs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 810</span>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 811</span>        <span class="k">for</span> <span class="n">succ</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">node_id</span><span class="p">):</span>
<span class="linenos"> 812</span>            <span class="n">new_succ</span> <span class="o">=</span> <span class="n">succ</span><span class="o">.</span><span class="n">replace_source</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="linenos"> 813</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 814</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="p">[</span><span class="n">new_succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_succ</span>
<span class="linenos"> 815</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">:</span>
<span class="linenos"> 816</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="p">[</span><span class="n">new_succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_succ</span>
<span class="linenos"> 817</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 818</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="p">[</span><span class="n">new_succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_succ</span>
<span class="linenos"> 819</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 820</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span><span class="p">[</span><span class="n">new_succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_succ</span>
<span class="linenos"> 821</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 822</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span><span class="p">[</span><span class="n">new_succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_succ</span>
<span class="linenos"> 823</span>
<span class="linenos"> 824</span>        <span class="k">for</span> <span class="n">pred</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span><span class="p">(</span><span class="n">node_id</span><span class="p">):</span>
<span class="linenos"> 825</span>            <span class="n">new_pred</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">replace_target</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="linenos"> 826</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_pred</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 827</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="p">[</span><span class="n">new_pred</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pred</span>
<span class="linenos"> 828</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_pred</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">:</span>
<span class="linenos"> 829</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="p">[</span><span class="n">new_pred</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pred</span>
<span class="linenos"> 830</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_pred</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 831</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="p">[</span><span class="n">new_pred</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pred</span>
<span class="linenos"> 832</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_pred</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 833</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span><span class="p">[</span><span class="n">new_pred</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pred</span>
<span class="linenos"> 834</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_pred</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 835</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span><span class="p">[</span><span class="n">new_pred</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pred</span>
<span class="linenos"> 836</span>
<div class="viewcode-block" id="KCFG.remove_attr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_attr">[docs]</a>
<span class="linenos"> 837</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="n">NodeAttr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 838</span>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 839</span>        <span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">remove_attr</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
<span class="linenos"> 840</span>        <span class="bp">self</span><span class="o">.</span><span class="n">replace_node</span><span class="p">(</span><span class="n">new_node</span><span class="p">)</span></div>

<span class="linenos"> 841</span>
<div class="viewcode-block" id="KCFG.discard_attr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.discard_attr">[docs]</a>
<span class="linenos"> 842</span>    <span class="k">def</span><span class="w"> </span><span class="nf">discard_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="n">NodeAttr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 843</span>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 844</span>        <span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">discard_attr</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
<span class="linenos"> 845</span>        <span class="bp">self</span><span class="o">.</span><span class="n">replace_node</span><span class="p">(</span><span class="n">new_node</span><span class="p">)</span></div>

<span class="linenos"> 846</span>
<div class="viewcode-block" id="KCFG.add_attr">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.add_attr">[docs]</a>
<span class="linenos"> 847</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="n">NodeAttr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 848</span>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 849</span>        <span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">add_attr</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
<span class="linenos"> 850</span>        <span class="bp">self</span><span class="o">.</span><span class="n">replace_node</span><span class="p">(</span><span class="n">new_node</span><span class="p">)</span></div>

<span class="linenos"> 851</span>
<div class="viewcode-block" id="KCFG.let_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.let_node">[docs]</a>
<span class="linenos"> 852</span>    <span class="k">def</span><span class="w"> </span><span class="nf">let_node</span><span class="p">(</span>
<span class="linenos"> 853</span>        <span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFGNodeAttr</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos"> 854</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 855</span>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos"> 856</span>        <span class="n">new_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">let</span><span class="p">(</span><span class="n">cterm</span><span class="o">=</span><span class="n">cterm</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
<span class="linenos"> 857</span>        <span class="bp">self</span><span class="o">.</span><span class="n">replace_node</span><span class="p">(</span><span class="n">new_node</span><span class="p">)</span></div>

<span class="linenos"> 858</span>
<div class="viewcode-block" id="KCFG.replace_node">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.replace_node">[docs]</a>
<span class="linenos"> 859</span>    <span class="k">def</span><span class="w"> </span><span class="nf">replace_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 860</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
<span class="linenos"> 861</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 862</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_update_refs</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></div>

<span class="linenos"> 863</span>
<div class="viewcode-block" id="KCFG.successors">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.successors">[docs]</a>
<span class="linenos"> 864</span>    <span class="k">def</span><span class="w"> </span><span class="nf">successors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Successor</span><span class="p">]:</span>
<span class="linenos"> 865</span>        <span class="n">out_edges</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 866</span>        <span class="n">out_merged_edges</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 867</span>        <span class="n">out_covers</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">covers</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 868</span>        <span class="n">out_splits</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 869</span>        <span class="n">out_ndbranches</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndbranches</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 870</span>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_edges</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_merged_edges</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_covers</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_splits</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">out_ndbranches</span><span class="p">)</span></div>

<span class="linenos"> 871</span>
<div class="viewcode-block" id="KCFG.predecessors">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.predecessors">[docs]</a>
<span class="linenos"> 872</span>    <span class="k">def</span><span class="w"> </span><span class="nf">predecessors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Successor</span><span class="p">]:</span>
<span class="linenos"> 873</span>        <span class="n">in_edges</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 874</span>        <span class="n">in_merged_edges</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 875</span>        <span class="n">in_covers</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">covers</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 876</span>        <span class="n">in_splits</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 877</span>        <span class="n">in_ndbranches</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ndbranches</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 878</span>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">in_edges</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">in_merged_edges</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">in_covers</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">in_splits</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">in_ndbranches</span><span class="p">)</span></div>

<span class="linenos"> 879</span>
<span class="linenos"> 880</span>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_no_successors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 881</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">source_id</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos"> 882</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Node already has successors: </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 883</span>
<span class="linenos"> 884</span>    <span class="k">def</span><span class="w"> </span><span class="nf">_check_no_zero_loops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">NodeIdLike</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 885</span>        <span class="k">for</span> <span class="n">target_id</span> <span class="ow">in</span> <span class="n">target_ids</span><span class="p">:</span>
<span class="linenos"> 886</span>            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortest_path_between</span><span class="p">(</span><span class="n">target_id</span><span class="p">,</span> <span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 887</span>            <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos"> 888</span>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="linenos"> 889</span>                    <span class="sa">f</span><span class="s1">&#39;Adding successor would create zero-length loop with backedge: </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="linenos"> 890</span>                <span class="p">)</span>
<span class="linenos"> 891</span>
<div class="viewcode-block" id="KCFG.add_successor">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.add_successor">[docs]</a>
<span class="linenos"> 892</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add_successor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">succ</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 893</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_check_no_successors</span><span class="p">(</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 894</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_check_no_zero_loops</span><span class="p">(</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">succ</span><span class="o">.</span><span class="n">target_ids</span><span class="p">)</span>
<span class="linenos"> 895</span>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 896</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="p">[</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">succ</span>
<span class="linenos"> 897</span>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">:</span>
<span class="linenos"> 898</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="p">[</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">succ</span>
<span class="linenos"> 899</span>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">:</span>
<span class="linenos"> 900</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="p">[</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">succ</span>
<span class="linenos"> 901</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 902</span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">succ</span><span class="o">.</span><span class="n">target_ids</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos"> 903</span>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="linenos"> 904</span>                    <span class="sa">f</span><span class="s1">&#39;Cannot create </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span><span class="si">}</span><span class="s1"> node with less than 2 targets: </span><span class="si">{</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">succ</span><span class="o">.</span><span class="n">target_ids</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="linenos"> 905</span>                <span class="p">)</span>
<span class="linenos"> 906</span>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos"> 907</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span><span class="p">[</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">succ</span>
<span class="linenos"> 908</span>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span> <span class="ow">is</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos"> 909</span>                <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span><span class="p">[</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">succ</span></div>

<span class="linenos"> 910</span>
<div class="viewcode-block" id="KCFG.edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.edge">[docs]</a>
<span class="linenos"> 911</span>    <span class="k">def</span><span class="w"> </span><span class="nf">edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Edge</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 912</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 913</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 914</span>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos"> 915</span>        <span class="k">return</span> <span class="n">edge</span> <span class="k">if</span> <span class="n">edge</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">edge</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_id</span> <span class="k">else</span> <span class="kc">None</span></div>

<span class="linenos"> 916</span>
<div class="viewcode-block" id="KCFG.edges">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.edges">[docs]</a>
<span class="linenos"> 917</span>    <span class="k">def</span><span class="w"> </span><span class="nf">edges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span><span class="p">]:</span>
<span class="linenos"> 918</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">source_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos"> 919</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos"> 920</span>        <span class="k">return</span> <span class="p">[</span>
<span class="linenos"> 921</span>            <span class="n">edge</span>
<span class="linenos"> 922</span>            <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="linenos"> 923</span>            <span class="k">if</span> <span class="p">(</span><span class="n">source_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">source_id</span> <span class="o">==</span> <span class="n">edge</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">target_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">target_id</span> <span class="o">==</span> <span class="n">edge</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 924</span>        <span class="p">]</span></div>

<span class="linenos"> 925</span>
<div class="viewcode-block" id="KCFG.contains_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.contains_edge">[docs]</a>
<span class="linenos"> 926</span>    <span class="k">def</span><span class="w"> </span><span class="nf">contains_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edge</span><span class="p">:</span> <span class="n">Edge</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 927</span>        <span class="k">if</span> <span class="n">other</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">edge</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">edge</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
<span class="linenos"> 928</span>            <span class="k">return</span> <span class="n">edge</span> <span class="o">==</span> <span class="n">other</span>
<span class="linenos"> 929</span>        <span class="k">return</span> <span class="kc">False</span></div>

<span class="linenos"> 930</span>
<div class="viewcode-block" id="KCFG.create_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_edge">[docs]</a>
<span class="linenos"> 931</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">())</span> <span class="o">-&gt;</span> <span class="n">Edge</span><span class="p">:</span>
<span class="linenos"> 932</span>        <span class="k">if</span> <span class="n">depth</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos"> 933</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot build KCFG Edge with non-positive depth: </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 934</span>        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 935</span>        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 936</span>        <span class="n">edge</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rules</span><span class="p">))</span>
<span class="linenos"> 937</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
<span class="linenos"> 938</span>        <span class="k">return</span> <span class="n">edge</span></div>

<span class="linenos"> 939</span>
<div class="viewcode-block" id="KCFG.remove_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_edge">[docs]</a>
<span class="linenos"> 940</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 941</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 942</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 943</span>        <span class="n">edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge</span><span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 944</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">edge</span><span class="p">:</span>
<span class="linenos"> 945</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Edge does not exist: </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 946</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_edges</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span></div>

<span class="linenos"> 947</span>
<div class="viewcode-block" id="KCFG.merged_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.merged_edge">[docs]</a>
<span class="linenos"> 948</span>    <span class="k">def</span><span class="w"> </span><span class="nf">merged_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MergedEdge</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 949</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 950</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 951</span>        <span class="n">merged_edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos"> 952</span>        <span class="k">return</span> <span class="n">merged_edge</span> <span class="k">if</span> <span class="n">merged_edge</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">merged_edge</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_id</span> <span class="k">else</span> <span class="kc">None</span></div>

<span class="linenos"> 953</span>
<div class="viewcode-block" id="KCFG.merged_edges">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.merged_edges">[docs]</a>
<span class="linenos"> 954</span>    <span class="k">def</span><span class="w"> </span><span class="nf">merged_edges</span><span class="p">(</span>
<span class="linenos"> 955</span>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos"> 956</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">MergedEdge</span><span class="p">]:</span>
<span class="linenos"> 957</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">source_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos"> 958</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos"> 959</span>        <span class="k">return</span> <span class="p">[</span>
<span class="linenos"> 960</span>            <span class="n">merged_edge</span>
<span class="linenos"> 961</span>            <span class="k">for</span> <span class="n">merged_edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="linenos"> 962</span>            <span class="k">if</span> <span class="p">(</span><span class="n">source_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">source_id</span> <span class="o">==</span> <span class="n">merged_edge</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 963</span>            <span class="ow">and</span> <span class="p">(</span><span class="n">target_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">target_id</span> <span class="o">==</span> <span class="n">merged_edge</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos"> 964</span>        <span class="p">]</span></div>

<span class="linenos"> 965</span>
<div class="viewcode-block" id="KCFG.contains_merged_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.contains_merged_edge">[docs]</a>
<span class="linenos"> 966</span>    <span class="k">def</span><span class="w"> </span><span class="nf">contains_merged_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edge</span><span class="p">:</span> <span class="n">MergedEdge</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos"> 967</span>        <span class="k">if</span> <span class="n">other</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edge</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">edge</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">edge</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
<span class="linenos"> 968</span>            <span class="k">return</span> <span class="n">edge</span> <span class="o">==</span> <span class="n">other</span>
<span class="linenos"> 969</span>        <span class="k">return</span> <span class="kc">False</span></div>

<span class="linenos"> 970</span>
<div class="viewcode-block" id="KCFG.create_merged_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_merged_edge">[docs]</a>
<span class="linenos"> 971</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_merged_edge</span><span class="p">(</span>
<span class="linenos"> 972</span>        <span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">edges</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Edge</span> <span class="o">|</span> <span class="n">MergedEdge</span><span class="p">]</span>
<span class="linenos"> 973</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MergedEdge</span><span class="p">:</span>
<span class="linenos"> 974</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">edges</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos"> 975</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot build KCFG MergedEdge with no edges: </span><span class="si">{</span><span class="n">edges</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 976</span>        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 977</span>        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 978</span>        <span class="n">flatten_edges</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Edge</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos"> 979</span>        <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
<span class="linenos"> 980</span>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">edge</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">):</span>
<span class="linenos"> 981</span>                <span class="n">flatten_edges</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">edge</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span>
<span class="linenos"> 982</span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos"> 983</span>                <span class="n">flatten_edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
<span class="linenos"> 984</span>        <span class="n">merged_edge</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MergedEdge</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">flatten_edges</span><span class="p">))</span>
<span class="linenos"> 985</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">merged_edge</span><span class="p">)</span>
<span class="linenos"> 986</span>        <span class="k">return</span> <span class="n">merged_edge</span></div>

<span class="linenos"> 987</span>
<div class="viewcode-block" id="KCFG.remove_merged_edge">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_merged_edge">[docs]</a>
<span class="linenos"> 988</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_merged_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 989</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos"> 990</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 991</span>        <span class="n">merged_edge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edge</span><span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="p">)</span>
<span class="linenos"> 992</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">merged_edge</span><span class="p">:</span>
<span class="linenos"> 993</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;MergedEdge does not exist: </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 994</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_merged_edges</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span></div>

<span class="linenos"> 995</span>
<div class="viewcode-block" id="KCFG.general_edges">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.general_edges">[docs]</a>
<span class="linenos"> 996</span>    <span class="k">def</span><span class="w"> </span><span class="nf">general_edges</span><span class="p">(</span>
<span class="linenos"> 997</span>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos"> 998</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Edge</span> <span class="o">|</span> <span class="n">MergedEdge</span><span class="p">]:</span>
<span class="linenos"> 999</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">(</span>
<span class="linenos">1000</span>            <span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span>
<span class="linenos">1001</span>        <span class="p">)</span></div>

<span class="linenos">1002</span>
<div class="viewcode-block" id="KCFG.cover">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.cover">[docs]</a>
<span class="linenos">1003</span>    <span class="k">def</span><span class="w"> </span><span class="nf">cover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Cover</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1004</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1005</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos">1006</span>        <span class="n">cover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="linenos">1007</span>        <span class="k">return</span> <span class="n">cover</span> <span class="k">if</span> <span class="n">cover</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">cover</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_id</span> <span class="k">else</span> <span class="kc">None</span></div>

<span class="linenos">1008</span>
<div class="viewcode-block" id="KCFG.covers">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.covers">[docs]</a>
<span class="linenos">1009</span>    <span class="k">def</span><span class="w"> </span><span class="nf">covers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Cover</span><span class="p">]:</span>
<span class="linenos">1010</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">source_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos">1011</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos">1012</span>        <span class="k">return</span> <span class="p">[</span>
<span class="linenos">1013</span>            <span class="n">cover</span>
<span class="linenos">1014</span>            <span class="k">for</span> <span class="n">cover</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="linenos">1015</span>            <span class="k">if</span> <span class="p">(</span><span class="n">source_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">source_id</span> <span class="o">==</span> <span class="n">cover</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos">1016</span>            <span class="ow">and</span> <span class="p">(</span><span class="n">target_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">target_id</span> <span class="o">==</span> <span class="n">cover</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos">1017</span>        <span class="p">]</span></div>

<span class="linenos">1018</span>
<div class="viewcode-block" id="KCFG.contains_cover">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.contains_cover">[docs]</a>
<span class="linenos">1019</span>    <span class="k">def</span><span class="w"> </span><span class="nf">contains_cover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cover</span><span class="p">:</span> <span class="n">Cover</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1020</span>        <span class="k">if</span> <span class="n">other</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cover</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">cover</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">cover</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">):</span>
<span class="linenos">1021</span>            <span class="k">return</span> <span class="n">cover</span> <span class="o">==</span> <span class="n">other</span>
<span class="linenos">1022</span>        <span class="k">return</span> <span class="kc">False</span></div>

<span class="linenos">1023</span>
<div class="viewcode-block" id="KCFG.create_cover">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_cover">[docs]</a>
<span class="linenos">1024</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_cover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">csubst</span><span class="p">:</span> <span class="n">CSubst</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Cover</span><span class="p">:</span>
<span class="linenos">1025</span>        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1026</span>        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos">1027</span>        <span class="k">if</span> <span class="n">csubst</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1028</span>            <span class="n">csubst</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">match_with_constraint</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">cterm</span><span class="p">)</span>
<span class="linenos">1029</span>            <span class="k">if</span> <span class="n">csubst</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1030</span>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No matching between: </span><span class="si">{</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1"> and </span><span class="si">{</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">1031</span>        <span class="n">cover</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Cover</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">csubst</span><span class="o">=</span><span class="n">csubst</span><span class="p">)</span>
<span class="linenos">1032</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">cover</span><span class="p">)</span>
<span class="linenos">1033</span>        <span class="k">return</span> <span class="n">cover</span></div>

<span class="linenos">1034</span>
<div class="viewcode-block" id="KCFG.remove_cover">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_cover">[docs]</a>
<span class="linenos">1035</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_cover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1036</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1037</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos">1038</span>        <span class="n">cover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cover</span><span class="p">(</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="p">)</span>
<span class="linenos">1039</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">cover</span><span class="p">:</span>
<span class="linenos">1040</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cover does not exist: </span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">target_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">1041</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span></div>

<span class="linenos">1042</span>
<div class="viewcode-block" id="KCFG.edge_likes">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.edge_likes">[docs]</a>
<span class="linenos">1043</span>    <span class="k">def</span><span class="w"> </span><span class="nf">edge_likes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">EdgeLike</span><span class="p">]:</span>
<span class="linenos">1044</span>        <span class="k">return</span> <span class="p">(</span>
<span class="linenos">1045</span>            <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;List[KCFG.EdgeLike]&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">))</span>
<span class="linenos">1046</span>            <span class="o">+</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;List[KCFG.EdgeLike]&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">covers</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">))</span>
<span class="linenos">1047</span>            <span class="o">+</span> <span class="n">cast</span><span class="p">(</span><span class="s1">&#39;List[KCFG.EdgeLike]&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">merged_edges</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">target_id</span><span class="o">=</span><span class="n">target_id</span><span class="p">))</span>
<span class="linenos">1048</span>        <span class="p">)</span></div>

<span class="linenos">1049</span>
<div class="viewcode-block" id="KCFG.add_vacuous">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.add_vacuous">[docs]</a>
<span class="linenos">1050</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add_vacuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1051</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_attr</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">VACUOUS</span><span class="p">)</span></div>

<span class="linenos">1052</span>
<div class="viewcode-block" id="KCFG.remove_vacuous">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_vacuous">[docs]</a>
<span class="linenos">1053</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_vacuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1054</span>        <span class="bp">self</span><span class="o">.</span><span class="n">remove_attr</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">VACUOUS</span><span class="p">)</span></div>

<span class="linenos">1055</span>
<div class="viewcode-block" id="KCFG.discard_vacuous">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.discard_vacuous">[docs]</a>
<span class="linenos">1056</span>    <span class="k">def</span><span class="w"> </span><span class="nf">discard_vacuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1057</span>        <span class="bp">self</span><span class="o">.</span><span class="n">discard_attr</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">VACUOUS</span><span class="p">)</span></div>

<span class="linenos">1058</span>
<div class="viewcode-block" id="KCFG.add_stuck">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.add_stuck">[docs]</a>
<span class="linenos">1059</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add_stuck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1060</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_attr</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">STUCK</span><span class="p">)</span></div>

<span class="linenos">1061</span>
<div class="viewcode-block" id="KCFG.remove_stuck">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_stuck">[docs]</a>
<span class="linenos">1062</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_stuck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1063</span>        <span class="bp">self</span><span class="o">.</span><span class="n">remove_attr</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">STUCK</span><span class="p">)</span></div>

<span class="linenos">1064</span>
<div class="viewcode-block" id="KCFG.discard_stuck">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.discard_stuck">[docs]</a>
<span class="linenos">1065</span>    <span class="k">def</span><span class="w"> </span><span class="nf">discard_stuck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1066</span>        <span class="bp">self</span><span class="o">.</span><span class="n">discard_attr</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">STUCK</span><span class="p">)</span></div>

<span class="linenos">1067</span>
<div class="viewcode-block" id="KCFG.splits">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.splits">[docs]</a>
<span class="linenos">1068</span>    <span class="k">def</span><span class="w"> </span><span class="nf">splits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Split</span><span class="p">]:</span>
<span class="linenos">1069</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">source_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos">1070</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos">1071</span>        <span class="k">return</span> <span class="p">[</span>
<span class="linenos">1072</span>            <span class="n">s</span>
<span class="linenos">1073</span>            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="linenos">1074</span>            <span class="k">if</span> <span class="p">(</span><span class="n">source_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">source_id</span> <span class="o">==</span> <span class="n">s</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">target_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">target_id</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">target_ids</span><span class="p">)</span>
<span class="linenos">1075</span>        <span class="p">]</span></div>

<span class="linenos">1076</span>
<div class="viewcode-block" id="KCFG.contains_split">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.contains_split">[docs]</a>
<span class="linenos">1077</span>    <span class="k">def</span><span class="w"> </span><span class="nf">contains_split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split</span><span class="p">:</span> <span class="n">Split</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1078</span>        <span class="k">return</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span><span class="o">.</span><span class="n">values</span><span class="p">()</span></div>

<span class="linenos">1079</span>
<div class="viewcode-block" id="KCFG.create_split">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_split">[docs]</a>
<span class="linenos">1080</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">splits</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">CSubst</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">:</span>
<span class="linenos">1081</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1082</span>        <span class="n">split</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">),</span> <span class="nb">tuple</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">nid</span><span class="p">),</span> <span class="n">csubst</span><span class="p">)</span> <span class="k">for</span> <span class="n">nid</span><span class="p">,</span> <span class="n">csubst</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">splits</span><span class="p">)))</span>
<span class="linenos">1083</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
<span class="linenos">1084</span>        <span class="k">return</span> <span class="n">split</span></div>

<span class="linenos">1085</span>
<div class="viewcode-block" id="KCFG.create_split_by_nodes">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_split_by_nodes">[docs]</a>
<span class="linenos">1086</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_split_by_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">NodeIdLike</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Split</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1087</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a split without crafting a CSubst.&quot;&quot;&quot;</span>
<span class="linenos">1088</span>        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1089</span>        <span class="n">targets</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">target_ids</span><span class="p">]</span>
<span class="linenos">1090</span>        <span class="k">try</span><span class="p">:</span>
<span class="linenos">1091</span>            <span class="n">csubsts</span> <span class="o">=</span> <span class="p">[</span><span class="n">not_none</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">match_with_constraint</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">cterm</span><span class="p">))</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">]</span>
<span class="linenos">1092</span>        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<span class="linenos">1093</span>            <span class="k">return</span> <span class="kc">None</span>
<span class="linenos">1094</span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_split</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">target_ids</span><span class="p">,</span> <span class="n">csubsts</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></div>

<span class="linenos">1095</span>
<div class="viewcode-block" id="KCFG.ndbranches">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.ndbranches">[docs]</a>
<span class="linenos">1096</span>    <span class="k">def</span><span class="w"> </span><span class="nf">ndbranches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">NDBranch</span><span class="p">]:</span>
<span class="linenos">1097</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">source_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos">1098</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span> <span class="k">if</span> <span class="n">target_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
<span class="linenos">1099</span>        <span class="k">return</span> <span class="p">[</span>
<span class="linenos">1100</span>            <span class="n">b</span>
<span class="linenos">1101</span>            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="linenos">1102</span>            <span class="k">if</span> <span class="p">(</span><span class="n">source_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">source_id</span> <span class="o">==</span> <span class="n">b</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">target_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">target_id</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">target_ids</span><span class="p">)</span>
<span class="linenos">1103</span>        <span class="p">]</span></div>

<span class="linenos">1104</span>
<div class="viewcode-block" id="KCFG.contains_ndbranch">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.contains_ndbranch">[docs]</a>
<span class="linenos">1105</span>    <span class="k">def</span><span class="w"> </span><span class="nf">contains_ndbranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ndbranch</span><span class="p">:</span> <span class="n">NDBranch</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1106</span>        <span class="k">return</span> <span class="n">ndbranch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span></div>

<span class="linenos">1107</span>
<div class="viewcode-block" id="KCFG.create_ndbranch">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.create_ndbranch">[docs]</a>
<span class="linenos">1108</span>    <span class="k">def</span><span class="w"> </span><span class="nf">create_ndbranch</span><span class="p">(</span>
<span class="linenos">1109</span>        <span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">ndbranches</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">NodeIdLike</span><span class="p">],</span> <span class="n">rules</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">()</span>
<span class="linenos">1110</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">:</span>
<span class="linenos">1111</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1112</span>        <span class="n">ndbranch</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">NDBranch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">),</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">ndbranches</span><span class="p">)),</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rules</span><span class="p">))</span>
<span class="linenos">1113</span>        <span class="bp">self</span><span class="o">.</span><span class="n">add_successor</span><span class="p">(</span><span class="n">ndbranch</span><span class="p">)</span>
<span class="linenos">1114</span>        <span class="k">return</span> <span class="n">ndbranch</span></div>

<span class="linenos">1115</span>
<div class="viewcode-block" id="KCFG.split_on_constraints">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.split_on_constraints">[docs]</a>
<span class="linenos">1116</span>    <span class="k">def</span><span class="w"> </span><span class="nf">split_on_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KInner</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="linenos">1117</span>        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1118</span>        <span class="n">branch_node_ids</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">c</span><span class="p">))</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">]</span>
<span class="linenos">1119</span>        <span class="n">csubsts</span> <span class="o">=</span> <span class="p">[</span><span class="n">not_none</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">cterm</span><span class="o">.</span><span class="n">match_with_constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span><span class="o">.</span><span class="n">cterm</span><span class="p">))</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">branch_node_ids</span><span class="p">]</span>
<span class="linenos">1120</span>        <span class="bp">self</span><span class="o">.</span><span class="n">create_split</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">branch_node_ids</span><span class="p">,</span> <span class="n">csubsts</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="linenos">1121</span>        <span class="k">return</span> <span class="n">branch_node_ids</span></div>

<span class="linenos">1122</span>
<div class="viewcode-block" id="KCFG.add_alias">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.add_alias">[docs]</a>
<span class="linenos">1123</span>    <span class="k">def</span><span class="w"> </span><span class="nf">add_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1124</span>        <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">in</span> <span class="n">alias</span><span class="p">:</span>
<span class="linenos">1125</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Alias may not contain &quot;@&quot;&#39;</span><span class="p">)</span>
<span class="linenos">1126</span>        <span class="k">if</span> <span class="n">alias</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="p">:</span>
<span class="linenos">1127</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duplicate alias: </span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">1128</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos">1129</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="n">node_id</span></div>

<span class="linenos">1130</span>
<div class="viewcode-block" id="KCFG.remove_alias">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.remove_alias">[docs]</a>
<span class="linenos">1131</span>    <span class="k">def</span><span class="w"> </span><span class="nf">remove_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1132</span>        <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="p">:</span>
<span class="linenos">1133</span>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Alias does not exist: </span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">1134</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_aliases</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span></div>

<span class="linenos">1135</span>
<div class="viewcode-block" id="KCFG.is_root">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_root">[docs]</a>
<span class="linenos">1136</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_root</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1137</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos">1138</span>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span><span class="p">(</span><span class="n">node_id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span></div>

<span class="linenos">1139</span>
<div class="viewcode-block" id="KCFG.is_vacuous">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_vacuous">[docs]</a>
<span class="linenos">1140</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_vacuous</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1141</span>        <span class="k">return</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">VACUOUS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span></div>

<span class="linenos">1142</span>
<div class="viewcode-block" id="KCFG.is_stuck">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_stuck">[docs]</a>
<span class="linenos">1143</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_stuck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1144</span>        <span class="k">return</span> <span class="n">KCFGNodeAttr</span><span class="o">.</span><span class="n">STUCK</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span><span class="o">.</span><span class="n">attrs</span></div>

<span class="linenos">1145</span>
<div class="viewcode-block" id="KCFG.is_split">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_split">[docs]</a>
<span class="linenos">1146</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1147</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos">1148</span>        <span class="k">return</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_splits</span></div>

<span class="linenos">1149</span>
<div class="viewcode-block" id="KCFG.is_ndbranch">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_ndbranch">[docs]</a>
<span class="linenos">1150</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_ndbranch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1151</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos">1152</span>        <span class="k">return</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ndbranches</span></div>

<span class="linenos">1153</span>
<div class="viewcode-block" id="KCFG.is_leaf">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_leaf">[docs]</a>
<span class="linenos">1154</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_leaf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1155</span>        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">node_id</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span></div>

<span class="linenos">1156</span>
<div class="viewcode-block" id="KCFG.is_covered">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.is_covered">[docs]</a>
<span class="linenos">1157</span>    <span class="k">def</span><span class="w"> </span><span class="nf">is_covered</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1158</span>        <span class="n">node_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos">1159</span>        <span class="k">return</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_covers</span></div>

<span class="linenos">1160</span>
<div class="viewcode-block" id="KCFG.prune">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.prune">[docs]</a>
<span class="linenos">1161</span>    <span class="k">def</span><span class="w"> </span><span class="nf">prune</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">keep_nodes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">NodeIdLike</span><span class="p">]</span> <span class="o">=</span> <span class="p">())</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="linenos">1162</span>        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reachable_nodes</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>
<span class="linenos">1163</span>        <span class="n">keep_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">keep_nodes</span><span class="p">]</span>
<span class="linenos">1164</span>        <span class="n">pruned_nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">1165</span>        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
<span class="linenos">1166</span>            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">keep_nodes</span><span class="p">:</span>
<span class="linenos">1167</span>                <span class="bp">self</span><span class="o">.</span><span class="n">remove_node</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos">1168</span>                <span class="n">pruned_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos">1169</span>        <span class="k">return</span> <span class="n">pruned_nodes</span></div>

<span class="linenos">1170</span>
<div class="viewcode-block" id="KCFG.shortest_path_between">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.shortest_path_between">[docs]</a>
<span class="linenos">1171</span>    <span class="k">def</span><span class="w"> </span><span class="nf">shortest_path_between</span><span class="p">(</span>
<span class="linenos">1172</span>        <span class="bp">self</span><span class="p">,</span> <span class="n">source_node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_node_id</span><span class="p">:</span> <span class="n">NodeIdLike</span>
<span class="linenos">1173</span>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Successor</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1174</span>        <span class="n">paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_between</span><span class="p">(</span><span class="n">source_node_id</span><span class="p">,</span> <span class="n">target_node_id</span><span class="p">)</span>
<span class="linenos">1175</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">1176</span>            <span class="k">return</span> <span class="kc">None</span>
<span class="linenos">1177</span>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">paths</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">(</span><span class="k">lambda</span> <span class="n">path</span><span class="p">:</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">path</span><span class="p">)))[</span><span class="mi">0</span><span class="p">]</span></div>

<span class="linenos">1178</span>
<div class="viewcode-block" id="KCFG.shortest_distance_between">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.shortest_distance_between">[docs]</a>
<span class="linenos">1179</span>    <span class="k">def</span><span class="w"> </span><span class="nf">shortest_distance_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_1_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">node_2_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1180</span>        <span class="n">path_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortest_path_between</span><span class="p">(</span><span class="n">node_1_id</span><span class="p">,</span> <span class="n">node_2_id</span><span class="p">)</span>
<span class="linenos">1181</span>        <span class="n">path_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortest_path_between</span><span class="p">(</span><span class="n">node_2_id</span><span class="p">,</span> <span class="n">node_1_id</span><span class="p">)</span>
<span class="linenos">1182</span>        <span class="n">distance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">1183</span>        <span class="k">if</span> <span class="n">path_1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1184</span>            <span class="n">distance</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">path_1</span><span class="p">)</span>
<span class="linenos">1185</span>        <span class="k">if</span> <span class="n">path_2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1186</span>            <span class="n">distance_2</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">path_length</span><span class="p">(</span><span class="n">path_2</span><span class="p">)</span>
<span class="linenos">1187</span>            <span class="k">if</span> <span class="n">distance</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">distance_2</span> <span class="o">&lt;</span> <span class="n">distance</span><span class="p">:</span>
<span class="linenos">1188</span>                <span class="n">distance</span> <span class="o">=</span> <span class="n">distance_2</span>
<span class="linenos">1189</span>        <span class="k">return</span> <span class="n">distance</span></div>

<span class="linenos">1190</span>
<div class="viewcode-block" id="KCFG.zero_depth_between">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.zero_depth_between">[docs]</a>
<span class="linenos">1191</span>    <span class="k">def</span><span class="w"> </span><span class="nf">zero_depth_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_1_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">node_2_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1192</span>        <span class="n">_node_1_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_1_id</span><span class="p">)</span>
<span class="linenos">1193</span>        <span class="n">_node_2_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">node_2_id</span><span class="p">)</span>
<span class="linenos">1194</span>        <span class="k">if</span> <span class="n">_node_1_id</span> <span class="o">==</span> <span class="n">_node_2_id</span><span class="p">:</span>
<span class="linenos">1195</span>            <span class="k">return</span> <span class="kc">True</span>
<span class="linenos">1196</span>        <span class="c1"># Short-circuit and don&#39;t run pathing algorithm if there is no 0 length path on the first step.</span>
<span class="linenos">1197</span>        <span class="n">path_lengths</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos">1198</span>            <span class="bp">self</span><span class="o">.</span><span class="n">path_length</span><span class="p">([</span><span class="n">successor</span><span class="p">])</span> <span class="k">for</span> <span class="n">successor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">_node_1_id</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">_node_2_id</span><span class="p">)</span>
<span class="linenos">1199</span>        <span class="p">]</span>
<span class="linenos">1200</span>        <span class="k">if</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">path_lengths</span><span class="p">:</span>
<span class="linenos">1201</span>            <span class="k">return</span> <span class="kc">False</span>
<span class="linenos">1202</span>
<span class="linenos">1203</span>        <span class="n">shortest_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortest_distance_between</span><span class="p">(</span><span class="n">_node_1_id</span><span class="p">,</span> <span class="n">_node_2_id</span><span class="p">)</span>
<span class="linenos">1204</span>
<span class="linenos">1205</span>        <span class="k">return</span> <span class="n">shortest_distance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">shortest_distance</span> <span class="o">==</span> <span class="mi">0</span></div>

<span class="linenos">1206</span>
<div class="viewcode-block" id="KCFG.paths_between">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.paths_between">[docs]</a>
<span class="linenos">1207</span>    <span class="k">def</span><span class="w"> </span><span class="nf">paths_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="n">target_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">Successor</span><span class="p">,</span> <span class="o">...</span><span class="p">]]:</span>
<span class="linenos">1208</span>        <span class="n">source_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">source_id</span><span class="p">)</span>
<span class="linenos">1209</span>        <span class="n">target_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">target_id</span><span class="p">)</span>
<span class="linenos">1210</span>
<span class="linenos">1211</span>        <span class="k">if</span> <span class="n">source_id</span> <span class="o">==</span> <span class="n">target_id</span><span class="p">:</span>
<span class="linenos">1212</span>            <span class="k">return</span> <span class="p">[()]</span>
<span class="linenos">1213</span>
<span class="linenos">1214</span>        <span class="n">source_successors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">source_id</span><span class="p">))</span>
<span class="linenos">1215</span>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">source_successors</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span>
<span class="linenos">1216</span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">source_successors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">1217</span>            <span class="k">return</span> <span class="p">[]</span>
<span class="linenos">1218</span>
<span class="linenos">1219</span>        <span class="n">paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">1220</span>        <span class="n">worklist</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">source_successors</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]</span>
<span class="linenos">1221</span>
<span class="linenos">1222</span>        <span class="k">def</span><span class="w"> </span><span class="nf">_in_path</span><span class="p">(</span><span class="n">_nid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="linenos">1223</span>            <span class="k">for</span> <span class="n">succ</span> <span class="ow">in</span> <span class="n">_path</span><span class="p">:</span>
<span class="linenos">1224</span>                <span class="k">if</span> <span class="n">_nid</span> <span class="o">==</span> <span class="n">succ</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
<span class="linenos">1225</span>                    <span class="k">return</span> <span class="kc">True</span>
<span class="linenos">1226</span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_path</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">1227</span>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">EdgeLike</span><span class="p">)</span> <span class="ow">and</span> <span class="n">_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">_nid</span><span class="p">:</span>
<span class="linenos">1228</span>                    <span class="k">return</span> <span class="kc">True</span>
<span class="linenos">1229</span>                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MultiEdge</span><span class="p">)</span> <span class="ow">and</span> <span class="n">_nid</span> <span class="ow">in</span> <span class="n">_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">target_ids</span><span class="p">:</span>
<span class="linenos">1230</span>                    <span class="k">return</span> <span class="kc">True</span>
<span class="linenos">1231</span>            <span class="k">return</span> <span class="kc">False</span>
<span class="linenos">1232</span>
<span class="linenos">1233</span>        <span class="k">while</span> <span class="n">worklist</span><span class="p">:</span>
<span class="linenos">1234</span>            <span class="n">curr_path</span> <span class="o">=</span> <span class="n">worklist</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="linenos">1235</span>            <span class="n">curr_successor</span> <span class="o">=</span> <span class="n">curr_path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">1236</span>            <span class="n">successors</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Successor</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">1237</span>
<span class="linenos">1238</span>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">curr_successor</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">EdgeLike</span><span class="p">):</span>
<span class="linenos">1239</span>                <span class="k">if</span> <span class="n">curr_successor</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_id</span><span class="p">:</span>
<span class="linenos">1240</span>                    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">curr_path</span><span class="p">))</span>
<span class="linenos">1241</span>                    <span class="k">continue</span>
<span class="linenos">1242</span>                <span class="k">else</span><span class="p">:</span>
<span class="linenos">1243</span>                    <span class="n">successors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">curr_successor</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="linenos">1244</span>
<span class="linenos">1245</span>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">curr_successor</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MultiEdge</span><span class="p">):</span>
<span class="linenos">1246</span>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">curr_successor</span><span class="o">.</span><span class="n">targets</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">1247</span>                    <span class="n">target</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">curr_successor</span><span class="o">.</span><span class="n">targets</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">1248</span>                    <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">target_id</span><span class="p">:</span>
<span class="linenos">1249</span>                        <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">curr_path</span><span class="p">))</span>
<span class="linenos">1250</span>                        <span class="k">continue</span>
<span class="linenos">1251</span>                    <span class="k">else</span><span class="p">:</span>
<span class="linenos">1252</span>                        <span class="n">successors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="linenos">1253</span>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">curr_successor</span><span class="o">.</span><span class="n">targets</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">1254</span>                    <span class="n">curr_path</span> <span class="o">=</span> <span class="n">curr_path</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">1255</span>                    <span class="n">successors</span> <span class="o">=</span> <span class="p">[</span><span class="n">curr_successor</span><span class="o">.</span><span class="n">with_single_target</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">curr_successor</span><span class="o">.</span><span class="n">targets</span><span class="p">]</span>
<span class="linenos">1256</span>
<span class="linenos">1257</span>            <span class="k">for</span> <span class="n">successor</span> <span class="ow">in</span> <span class="n">successors</span><span class="p">:</span>
<span class="linenos">1258</span>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">successor</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">EdgeLike</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">_in_path</span><span class="p">(</span><span class="n">successor</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">curr_path</span><span class="p">):</span>
<span class="linenos">1259</span>                    <span class="n">worklist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">successor</span><span class="p">])</span>
<span class="linenos">1260</span>                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">successor</span><span class="p">,</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">MultiEdge</span><span class="p">):</span>
<span class="linenos">1261</span>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">successor</span><span class="o">.</span><span class="n">targets</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">1262</span>                        <span class="n">target</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">successor</span><span class="o">.</span><span class="n">targets</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">1263</span>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">_in_path</span><span class="p">(</span><span class="n">target</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">curr_path</span><span class="p">):</span>
<span class="linenos">1264</span>                            <span class="n">worklist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">successor</span><span class="p">])</span>
<span class="linenos">1265</span>                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">successor</span><span class="o">.</span><span class="n">targets</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">1266</span>                        <span class="n">worklist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">successor</span><span class="p">])</span>
<span class="linenos">1267</span>
<span class="linenos">1268</span>        <span class="k">return</span> <span class="n">paths</span></div>

<span class="linenos">1269</span>
<div class="viewcode-block" id="KCFG.reachable_nodes">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.reachable_nodes">[docs]</a>
<span class="linenos">1270</span>    <span class="k">def</span><span class="w"> </span><span class="nf">reachable_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="n">NodeIdLike</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]:</span>
<span class="linenos">1271</span>        <span class="n">visited</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="linenos">1272</span>        <span class="n">worklist</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">node</span><span class="p">(</span><span class="n">source_id</span><span class="p">)]</span>
<span class="linenos">1273</span>
<span class="linenos">1274</span>        <span class="k">while</span> <span class="n">worklist</span><span class="p">:</span>
<span class="linenos">1275</span>            <span class="n">node</span> <span class="o">=</span> <span class="n">worklist</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="linenos">1276</span>
<span class="linenos">1277</span>            <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
<span class="linenos">1278</span>                <span class="k">continue</span>
<span class="linenos">1279</span>
<span class="linenos">1280</span>            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="linenos">1281</span>
<span class="linenos">1282</span>            <span class="k">if</span> <span class="ow">not</span> <span class="n">reverse</span><span class="p">:</span>
<span class="linenos">1283</span>                <span class="n">worklist</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">target</span> <span class="k">for</span> <span class="n">succ</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">successors</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">succ</span><span class="o">.</span><span class="n">targets</span><span class="p">)</span>
<span class="linenos">1284</span>            <span class="k">else</span><span class="p">:</span>
<span class="linenos">1285</span>                <span class="n">worklist</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">succ</span><span class="o">.</span><span class="n">source</span> <span class="k">for</span> <span class="n">succ</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessors</span><span class="p">(</span><span class="n">target_id</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="linenos">1286</span>
<span class="linenos">1287</span>        <span class="k">return</span> <span class="n">visited</span></div>

<span class="linenos">1288</span>
<div class="viewcode-block" id="KCFG.write_cfg_data">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.write_cfg_data">[docs]</a>
<span class="linenos">1289</span>    <span class="k">def</span><span class="w"> </span><span class="nf">write_cfg_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">1290</span>        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kcfg_store</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="linenos">1291</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_kcfg_store</span><span class="o">.</span><span class="n">write_cfg_data</span><span class="p">(</span>
<span class="linenos">1292</span>            <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict_no_nodes</span><span class="p">(),</span> <span class="n">deleted_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_deleted_nodes</span><span class="p">,</span> <span class="n">created_nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span>
<span class="linenos">1293</span>        <span class="p">)</span>
<span class="linenos">1294</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_deleted_nodes</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="linenos">1295</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_created_nodes</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>

<span class="linenos">1296</span>
<div class="viewcode-block" id="KCFG.read_cfg_data">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.read_cfg_data">[docs]</a>
<span class="linenos">1297</span>    <span class="nd">@staticmethod</span>
<span class="linenos">1298</span>    <span class="k">def</span><span class="w"> </span><span class="nf">read_cfg_data</span><span class="p">(</span><span class="n">cfg_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="p">:</span>
<span class="linenos">1299</span>        <span class="n">store</span> <span class="o">=</span> <span class="n">KCFGStore</span><span class="p">(</span><span class="n">cfg_dir</span><span class="p">)</span>
<span class="linenos">1300</span>        <span class="n">cfg</span> <span class="o">=</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">read_cfg_data</span><span class="p">())</span>
<span class="linenos">1301</span>        <span class="n">cfg</span><span class="o">.</span><span class="n">_kcfg_store</span> <span class="o">=</span> <span class="n">store</span>
<span class="linenos">1302</span>        <span class="k">return</span> <span class="n">cfg</span></div>

<span class="linenos">1303</span>
<div class="viewcode-block" id="KCFG.read_node_data">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFG.read_node_data">[docs]</a>
<span class="linenos">1304</span>    <span class="nd">@staticmethod</span>
<span class="linenos">1305</span>    <span class="k">def</span><span class="w"> </span><span class="nf">read_node_data</span><span class="p">(</span><span class="n">cfg_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">node_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="linenos">1306</span>        <span class="n">store</span> <span class="o">=</span> <span class="n">KCFGStore</span><span class="p">(</span><span class="n">cfg_dir</span><span class="p">)</span>
<span class="linenos">1307</span>        <span class="k">return</span> <span class="n">KCFG</span><span class="o">.</span><span class="n">Node</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">read_node_data</span><span class="p">(</span><span class="n">node_id</span><span class="p">))</span></div>
</div>

<span class="linenos">1308</span>
<span class="linenos">1309</span>
<div class="viewcode-block" id="KCFGExtendResult">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.KCFGExtendResult">[docs]</a>
<span class="linenos">1310</span><span class="k">class</span><span class="w"> </span><span class="nc">KCFGExtendResult</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span> <span class="o">...</span></div>

<span class="linenos">1311</span>
<span class="linenos">1312</span>
<div class="viewcode-block" id="Vacuous">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.Vacuous">[docs]</a>
<span class="linenos">1313</span><span class="nd">@final</span>
<span class="linenos">1314</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">1315</span><span class="k">class</span><span class="w"> </span><span class="nc">Vacuous</span><span class="p">(</span><span class="n">KCFGExtendResult</span><span class="p">):</span> <span class="o">...</span></div>

<span class="linenos">1316</span>
<span class="linenos">1317</span>
<div class="viewcode-block" id="Stuck">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.Stuck">[docs]</a>
<span class="linenos">1318</span><span class="nd">@final</span>
<span class="linenos">1319</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">1320</span><span class="k">class</span><span class="w"> </span><span class="nc">Stuck</span><span class="p">(</span><span class="n">KCFGExtendResult</span><span class="p">):</span> <span class="o">...</span></div>

<span class="linenos">1321</span>
<span class="linenos">1322</span>
<div class="viewcode-block" id="Abstract">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.Abstract">[docs]</a>
<span class="linenos">1323</span><span class="nd">@final</span>
<span class="linenos">1324</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">1325</span><span class="k">class</span><span class="w"> </span><span class="nc">Abstract</span><span class="p">(</span><span class="n">KCFGExtendResult</span><span class="p">):</span>
<span class="linenos">1326</span>    <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span></div>

<span class="linenos">1327</span>
<span class="linenos">1328</span>
<div class="viewcode-block" id="Step">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.Step">[docs]</a>
<span class="linenos">1329</span><span class="nd">@final</span>
<span class="linenos">1330</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">1331</span><span class="k">class</span><span class="w"> </span><span class="nc">Step</span><span class="p">(</span><span class="n">KCFGExtendResult</span><span class="p">):</span>
<span class="linenos">1332</span>    <span class="n">cterm</span><span class="p">:</span> <span class="n">CTerm</span>
<span class="linenos">1333</span>    <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span>
<span class="linenos">1334</span>    <span class="n">logs</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos">1335</span>    <span class="n">rule_labels</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="linenos">1336</span>    <span class="n">cut</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">1337</span>    <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

<span class="linenos">1338</span>
<span class="linenos">1339</span>
<div class="viewcode-block" id="Branch">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.Branch">[docs]</a>
<span class="linenos">1340</span><span class="nd">@final</span>
<span class="linenos">1341</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">1342</span><span class="k">class</span><span class="w"> </span><span class="nc">Branch</span><span class="p">(</span><span class="n">KCFGExtendResult</span><span class="p">):</span>
<span class="linenos">1343</span>    <span class="n">constraints</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">KInner</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos">1344</span>    <span class="n">heuristic</span><span class="p">:</span> <span class="nb">bool</span>
<span class="linenos">1345</span>    <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="linenos">1346</span>
<span class="linenos">1347</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">KInner</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">heuristic</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
<span class="linenos">1348</span>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;constraints&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">constraints</span><span class="p">))</span>
<span class="linenos">1349</span>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;heuristic&#39;</span><span class="p">,</span> <span class="n">heuristic</span><span class="p">)</span>
<span class="linenos">1350</span>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></div>

<span class="linenos">1351</span>
<span class="linenos">1352</span>
<div class="viewcode-block" id="NDBranch">
<a class="viewcode-back" href="../../../api/pyk.kcfg.kcfg.html#pyk.kcfg.kcfg.NDBranch">[docs]</a>
<span class="linenos">1353</span><span class="nd">@final</span>
<span class="linenos">1354</span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">1355</span><span class="k">class</span><span class="w"> </span><span class="nc">NDBranch</span><span class="p">(</span><span class="n">KCFGExtendResult</span><span class="p">):</span>
<span class="linenos">1356</span>    <span class="n">cterms</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">CTerm</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos">1357</span>    <span class="n">logs</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos">1358</span>    <span class="n">rule_labels</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="linenos">1359</span>
<span class="linenos">1360</span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cterms</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">CTerm</span><span class="p">],</span> <span class="n">logs</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">LogEntry</span><span class="p">,],</span> <span class="n">rule_labels</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="linenos">1361</span>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;cterms&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">cterms</span><span class="p">))</span>
<span class="linenos">1362</span>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;logs&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">logs</span><span class="p">))</span>
<span class="linenos">1363</span>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;rule_labels&#39;</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rule_labels</span><span class="p">))</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Runtime Verification, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>