(\x.  
  while (*x <= 3) do (
    newAgent (
      print me ;
      barrier) ;
    *x := *x + 1
  ) ; 
  barrier;
  print me) (ref 1)
