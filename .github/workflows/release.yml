name: 'Release'
run-name: K Framework Release ${{ github.ref_name }}
on:
  push:
    branches:
      - fix-deploy
concurrency:
  group: ${{ github.workflow }}

jobs:

  maven-deploy:
    name: 'Deploy to Maven Repository'
    runs-on: ubuntu-22.04
    timeout-minutes: 75
    steps:
      - name: 'Check out code'
        uses: actions/checkout@v3
        with:
          submodules: recursive
      - name: 'Set up Java for publishing to GitHub Maven Packages'
        uses: actions/setup-java@v3
        with:
          java-version: '11'
          distribution: 'adopt'
          server-id: runtime.verification
      - name: 'Maven Deployment'
        shell: bash {0}
        run: mvn --batch-mode deploy
